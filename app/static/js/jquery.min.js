!function(t){"use strict";var n,i=t.Base64;"undefined"!=typeof module&&module.exports&&(n=require("buffer").Buffer);var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(a),r=String.fromCharCode,s=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?r(192|t>>>6)+r(128|63&t):r(224|t>>>12&15)+r(128|t>>>6&63)+r(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return r(240|t>>>18&7)+r(128|t>>>12&63)+r(128|t>>>6&63)+r(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(e){return e.replace(l,s)},u=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[a.charAt(n>>>18),a.charAt(n>>>12&63),2<=t?"=":a.charAt(n>>>6&63),1<=t?"=":a.charAt(63&n)].join("")},d=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,u)},p=n?function(e){return new n(e).toString("base64")}:function(e){return d(c(e))},f=function(e,t){return t?p(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):p(e)},h=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),g=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return r(55296+(t>>>10))+r(56320+(1023&t));case 3:return r((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return r((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},m=function(e){return e.replace(h,g)},v=function(e){var t=e.length,n=t%4,i=(0<t?o[e.charAt(0)]<<18:0)|(1<t?o[e.charAt(1)]<<12:0)|(2<t?o[e.charAt(2)]<<6:0)|(3<t?o[e.charAt(3)]:0),a=[r(i>>>16),r(i>>>8&255),r(255&i)];return a.length-=[0,0,2,1][n],a.join("")},b=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,v)},y=n?function(e){return new n(e,"base64").toString()}:function(e){return m(b(e))},e=function(e){return y(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(t.Base64={VERSION:"2.1.4",atob:b,btoa:d,fromBase64:e,toBase64:f,utob:c,encode:f,encodeURI:function(e){return f(e,!0)},btou:m,decode:e,noConflict:function(){var e=t.Base64;return t.Base64=i,e}},"function"==typeof Object.defineProperty){var w=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",w(function(){return e(this)})),Object.defineProperty(String.prototype,"toBase64",w(function(e){return f(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",w(function(){return f(this,!0)}))}}}(this),function(e,t){"use strict";var n,f;e.buzz=(n=window.AudioContext||window.webkitAudioContext,f={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80,webAudioApi:!1,document:window.document},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),getAudioContext:function(){if(void 0===this.audioCtx)try{this.audioCtx=n?new n:null}catch(e){this.audioCtx=null}return this.audioCtx},sound:function(e,t){var s=(t=t||{}).document||f.defaults.document,i=0,l=[],a={},c=f.isSupported();function n(e){for(var t=[],n=e.length-1,i=0;i<=n;i++)t.push({start:e.start(i),end:e.end(i)});return t}function o(e){return e.split(".").pop()}if(this.load=function(){return c&&this.sound.load(),this},this.play=function(){return c&&this.sound.play(),this},this.togglePlay=function(){return c&&(this.sound.paused?this.sound.play():this.sound.pause()),this},this.pause=function(){return c&&this.sound.pause(),this},this.isPaused=function(){return c?this.sound.paused:null},this.stop=function(){return c&&(this.setTime(0),this.sound.pause()),this},this.isEnded=function(){return c?this.sound.ended:null},this.loop=function(){return c&&(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()})),this},this.unloop=function(){return c&&(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop")),this},this.mute=function(){return c&&(this.sound.muted=!0),this},this.unmute=function(){return c&&(this.sound.muted=!1),this},this.toggleMute=function(){return c&&(this.sound.muted=!this.sound.muted),this},this.isMuted=function(){return c?this.sound.muted:null},this.setVolume=function(e){return c&&(e<0&&(e=0),100<e&&(e=100),this.volume=e,this.sound.volume=e/100),this},this.getVolume=function(){return c?this.volume:this},this.increaseVolume=function(e){return this.setVolume(this.volume+(e||1))},this.decreaseVolume=function(e){return this.setVolume(this.volume-(e||1))},this.setTime=function(e){if(!c)return this;var t=!0;return this.whenReady(function(){!0===t&&(t=!1,this.sound.currentTime=e)}),this},this.getTime=function(){if(!c)return null;var e=Math.round(100*this.sound.currentTime)/100;return isNaN(e)?f.defaults.placeholder:e},this.setPercent=function(e){return c?this.setTime(f.fromPercent(e,this.sound.duration)):this},this.getPercent=function(){if(!c)return null;var e=Math.round(f.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(e)?f.defaults.placeholder:e},this.setSpeed=function(e){return c&&(this.sound.playbackRate=e),this},this.getSpeed=function(){return c?this.sound.playbackRate:null},this.getDuration=function(){if(!c)return null;var e=Math.round(100*this.sound.duration)/100;return isNaN(e)?f.defaults.placeholder:e},this.getPlayed=function(){return c?n(this.sound.played):null},this.getBuffered=function(){return c?n(this.sound.buffered):null},this.getSeekable=function(){return c?n(this.sound.seekable):null},this.getErrorCode=function(){return c&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!c)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return c?this.sound.readyState:null},this.getStateMessage=function(){if(!c)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return c?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!c)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(e,t){return c&&(this.sound[e]=t),this},this.get=function(e){return c?e?this.sound[e]:this.sound:null},this.bind=function(e,t){if(!c)return this;e=e.split(" ");for(var n=this,i=function(e){t.call(n,e)},a=0;a<e.length;a++){var o=e[a],r=o;o=r.split(".")[0],l.push({idx:r,func:i}),this.sound.addEventListener(o,i,!0)}return this},this.unbind=function(e){if(!c)return this;e=e.split(" ");for(var t=0;t<e.length;t++)for(var n=e[t],i=n.split(".")[0],a=0;a<l.length;a++){var o=l[a].idx.split(".");(l[a].idx===n||o[1]&&o[1]===n.replace(".",""))&&(this.sound.removeEventListener(i,l[a].func,!0),l.splice(a,1))}return this},this.bindOnce=function(e,t){if(!c)return this;var n=this;return a[i++]=!1,this.bind(e+"."+i,function(){a[i]||(a[i]=!0,t.call(n)),n.unbind(e+"."+i)}),this},this.trigger=function(e,t){if(!c)return this;e=e.split(" ");for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<l.length;a++){var o=l[a].idx.split(".");if(l[a].idx===i||o[0]&&o[0]===i.replace(".","")){var r=s.createEvent("HTMLEvents");r.initEvent(o[0],!1,!0),r.originalEvent=t,this.sound.dispatchEvent(r)}}return this},this.fadeTo=function(t,e,n){if(!c)return this;e instanceof Function?(n=e,e=f.defaults.duration):e=e||f.defaults.duration;var i=this.volume,a=e/Math.abs(i-t),o=this;return this.play(),this.whenReady(function(){!function e(){setTimeout(function(){i<t&&o.volume<t?(o.setVolume(o.volume+=1),e()):t<i&&o.volume>t?(o.setVolume(o.volume-=1),e()):n instanceof Function&&n.apply(o)},a)}()}),this},this.fadeIn=function(e,t){return c?this.setVolume(0).fadeTo(100,e,t):this},this.fadeOut=function(e,t){return c?this.fadeTo(0,e,t):this},this.fadeWith=function(e,t){return c&&(this.fadeOut(t,function(){this.stop()}),e.play().fadeIn(t)),this},this.whenReady=function(e){if(!c)return null;var t=this;0===this.sound.readyState?this.bind("canplay.buzzwhenready",function(){e.call(t)}):e.call(t)},this.addSource=function(e){var t=this,n=s.createElement("source");return n.src=e,f.types[o(e)]&&(n.type=f.types[o(e)]),this.sound.appendChild(n),n.addEventListener("error",function(e){t.trigger("sourceerror",e)}),n},c&&e){for(var r in f.defaults)f.defaults.hasOwnProperty(r)&&void 0===t[r]&&(t[r]=f.defaults[r]);if(this.sound=s.createElement("audio"),t.webAudioApi){var u=f.getAudioContext();u&&(this.source=u.createMediaElementSource(this.sound),this.source.connect(u.destination))}if(e instanceof Array)for(var d in e)e.hasOwnProperty(d)&&this.addSource(e[d]);else if(t.formats.length)for(var p in t.formats)t.formats.hasOwnProperty(p)&&this.addSource(e+"."+t.formats[p]);else this.addSource(e);t.loop&&this.loop(),t.autoplay&&(this.sound.autoplay="autoplay"),!0===t.preload?this.sound.preload="auto":!1===t.preload?this.sound.preload="none":this.sound.preload=t.preload,this.setVolume(t.volume),f.sounds.push(this)}},group:function(i){function a(){for(var e=o(null,arguments),t=e.shift(),n=0;n<i.length;n++)i[n][t].apply(i[n],e)}function o(e,t){return e instanceof Array?e:Array.prototype.slice.call(t)}i=o(i,arguments),this.getSounds=function(){return i},this.add=function(e){e=o(e,arguments);for(var t=0;t<e.length;t++)i.push(e[t])},this.remove=function(e){e=o(e,arguments);for(var t=0;t<e.length;t++)for(var n=0;n<i.length;n++)if(i[n]===e[t]){i.splice(n,1);break}},this.load=function(){return a("load"),this},this.play=function(){return a("play"),this},this.togglePlay=function(){return a("togglePlay"),this},this.pause=function(e){return a("pause",e),this},this.stop=function(){return a("stop"),this},this.mute=function(){return a("mute"),this},this.unmute=function(){return a("unmute"),this},this.toggleMute=function(){return a("toggleMute"),this},this.setVolume=function(e){return a("setVolume",e),this},this.increaseVolume=function(e){return a("increaseVolume",e),this},this.decreaseVolume=function(e){return a("decreaseVolume",e),this},this.loop=function(){return a("loop"),this},this.unloop=function(){return a("unloop"),this},this.setSpeed=function(e){return a("setSpeed",e),this},this.setTime=function(e){return a("setTime",e),this},this.set=function(e,t){return a("set",e,t),this},this.bind=function(e,t){return a("bind",e,t),this},this.unbind=function(e){return a("unbind",e),this},this.bindOnce=function(e,t){return a("bindOnce",e,t),this},this.trigger=function(e){return a("trigger",e),this},this.fade=function(e,t,n,i){return a("fade",e,t,n,i),this},this.fadeIn=function(e,t){return a("fadeIn",e,t),this},this.fadeOut=function(e,t){return a("fadeOut",e,t),this}},all:function(){return new f.group(f.sounds)},isSupported:function(){return!!f.el.canPlayType},isOGGSupported:function(){return!!f.el.canPlayType&&f.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!f.el.canPlayType&&f.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!f.el.canPlayType&&f.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!f.el.canPlayType&&(f.el.canPlayType("audio/x-m4a;")||f.el.canPlayType("audio/aac;"))},toTimer:function(e,t){var n,i,a;return n=Math.floor(e/3600),n=isNaN(n)?"--":10<=n?n:"0"+n,i=t?Math.floor(e/60%60):Math.floor(e/60),i=isNaN(i)?"--":10<=i?i:"0"+i,a=Math.floor(e%60),a=isNaN(a)?"--":10<=a?a:"0"+a,t?n+":"+i+":"+a:i+":"+a},fromTimer:function(e){var t=e.toString().split(":");return t&&3===t.length&&(e=3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseInt(t[2],10)),t&&2===t.length&&(e=60*parseInt(t[0],10)+parseInt(t[1],10)),e},toPercent:function(e,t,n){var i=Math.pow(10,n||0);return Math.round(100*e/t*i)/i},fromPercent:function(e,t,n){var i=Math.pow(10,n||0);return Math.round(t/100*e*i)/i}})}(this),window.$clamp=function(a,e){e=e||{};var o,n=window,r={clamp:e.clamp||2,useNativeClamp:void 0===e.useNativeClamp||e.useNativeClamp,splitOnChars:e.splitOnChars||[".","-","–","—"," "],animate:e.animate||!1,truncationChar:e.truncationChar||"…",truncationHTML:e.truncationHTML},t=a.style,i=a.innerHTML,s=void 0!==a.style.webkitLineClamp,l=r.clamp,c=l.indexOf&&(-1<l.indexOf("px")||-1<l.indexOf("em"));function u(e,t){return n.getComputedStyle||(n.getComputedStyle=function(n,e){return this.el=n,this.getPropertyValue=function(e){var t=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),t.test(e)&&(e=e.replace(t,function(){return arguments[2].toUpperCase()})),n.currentStyle&&n.currentStyle[e]?n.currentStyle[e]:null},this}),n.getComputedStyle(e,null).getPropertyValue(t)}function d(e){var t=e||a.clientHeight,n=p(a);return Math.max(Math.floor(t/n),0)}function p(e){var t=u(e,"line-height");return"normal"==t&&(t=1.2*parseInt(u(e,"font-size"))),parseInt(t)}r.truncationHTML&&((o=document.createElement("span")).innerHTML=r.truncationHTML);var f,h,g,m,v=r.splitOnChars.slice(0),b=v[0];function y(e){return e.lastChild.children&&0<e.lastChild.children.length?y(Array.prototype.slice.call(e.children).pop()):e.lastChild&&e.lastChild.nodeValue&&""!=e.lastChild.nodeValue&&e.lastChild.nodeValue!=r.truncationChar?e.lastChild:(e.lastChild.parentNode.removeChild(e.lastChild),y(a))}function w(e,t){e.nodeValue=t+r.truncationChar}if("auto"==l?l=d():c&&(l=d(parseInt(l))),s&&r.useNativeClamp)t.overflow="hidden",t.textOverflow="ellipsis",t.webkitBoxOrient="vertical",t.display="-webkit-box",t.webkitLineClamp=l,c&&(t.height=r.clamp+"px");else{var x=(m=l,p(a)*m);x<=a.clientHeight&&(g=function e(t,n){if(n){var i=t.nodeValue.replace(r.truncationChar,"");if(f||(b=0<v.length?v.shift():"",f=i.split(b)),1<f.length?(h=f.pop(),w(t,f.join(b))):f=null,o&&(t.nodeValue=t.nodeValue.replace(r.truncationChar,""),a.innerHTML=t.nodeValue+" "+o.innerHTML+r.truncationChar),f){if(a.clientHeight<=n){if(!(0<=v.length&&""!=b))return a.innerHTML;w(t,f.join(b)+b+h),f=null}}else""==b&&(w(t,""),t=y(a),v=r.splitOnChars.slice(0),b=v[0],h=f=null);if(!r.animate)return e(t,n);setTimeout(function(){e(t,n)},!0===r.animate?10:r.animate)}}(y(a),x))}return{original:i,clamped:g}},function(b){var y=0;b.fn.extend({open:function(){b(this).trigger("open.bubbletip")},close:function(){b(this).trigger("close.bubbletip")},bubbletip:function(t,n){if(b(this).data("tip",b(t).get(0).id),0<b("table.bubbletip #"+b(t).get(0).id).length)return this;var i,a,o,r,s,l,c,u,d,p,f,h;function g(){var t;c||(c=!0,u&&d.stop(!0,!1),o.calculateOnShow&&v(),o.position.match(/^fixed$/i)?(t={},o.deltaDirection.match(/^up|down$/i)?o.fixedVertical.match(/^top$/i)?(u||d.css("top",parseInt(r.top-r.delta,10)+"px"),t.top=parseInt(r.top,10)+"px"):(u||d.css("bottom",parseInt(r.bottom+r.delta,10)+"px"),t.bottom=parseInt(r.bottom,10)+"px"):o.fixedHorizontal.match(/^right$/i)?(u||(o.fixedVertical.match(/^top$/i)?d.css({top:parseInt(r.top,10)+"px",right:parseInt(r.right-r.delta,10)+"px"}):d.css({bottom:parseInt(r.bottom,10)+"px",right:parseInt(r.right-r.delta,10)+"px"})),t.right=parseInt(r.right,10)+"px"):(u||(o.fixedVertical.match(/^top$/i)?d.css({top:parseInt(r.top,10)+"px",left:parseInt(r.left+r.delta,10)+"px"}):d.css({bottom:parseInt(r.bottom,10)+"px",left:parseInt(r.left+r.delta,10)+"px"})),t.left=parseInt(r.left,10)+"px")):o.positionAt.match(/^element|body$/i)?o.deltaDirection.match(/^up|down$/i)?(u||d.css("top",parseInt(r.top-r.delta,10)+"px"),t={top:r.top+"px"}):(u||d.css("left",parseInt(r.left-r.delta,10)+"px"),t={left:r.left+"px"}):o.deltaDirection.match(/^up|down$/i)?(u||(r.mouseTop=e.pageY+r.top,d.css({top:parseInt(r.mouseTop+r.delta,10)+"px",left:parseInt(e.pageX-d.width()/2,10)+"px"})),t={top:r.mouseTop+"px"}):(u||(r.mouseLeft=e.pageX+r.left,d.css({left:parseInt(r.mouseLeft+r.delta,10)+"px",top:parseInt(e.pageY-d.height()/2,10)+"px"})),t={left:r.left+"px"}),u=!1,d.show(),t=b.extend(t,{opacity:1}),d.animate(t,o.animationDuration,o.animationEasing,function(){o.position.match(/^fixed$/i)?d.css({opacity:"",position:"fixed",top:r.top,left:r.left}):d.css("opacity",""),c=!0}))}function m(){var e;u=!(c=!1),o.position.match(/^fixed$/i)?(e={},o.deltaDirection.match(/^up|down$/i)?(""!==r.bottom&&(e.bottom=parseInt(r.bottom+r.delta,10)+"px"),""!==r.top&&(e.top=parseInt(r.top-r.delta,10)+"px")):o.fixedHorizontal.match(/^left$/i)?(""!==r.right&&(e.right=parseInt(r.right+r.delta,10)+"px"),""!==r.left&&(e.left=parseInt(r.left+r.delta,10)+"px")):(""!==r.right&&(e.right=parseInt(r.right-r.delta,10)+"px"),""!==r.left&&(e.left=parseInt(r.left-r.delta,10)+"px"))):e=o.positionAt.match(/^element|body$/i)?o.deltaDirection.match(/^up|down$/i)?{top:parseInt(r.top-r.delta,10)+"px"}:{left:parseInt(r.left-r.delta,10)+"px"}:o.deltaDirection.match(/^up|down$/i)?{top:parseInt(r.mouseTop-r.delta,10)+"px"}:{left:parseInt(r.mouseLeft-r.delta,10)+"px"},e=b.extend(e,{opacity:0}),d.animate(e,o.animationDuration,o.animationEasing,function(){d.hide(),u=!1})}function v(){var e;o.position.match(/^fixed$/i)?(e=o.positionAtElement.offset(),o.fixedHorizontal.match(/^left$/i)?r.left=e.left+o.positionAtElement.outerWidth()/2:r.left="",o.fixedHorizontal.match(/^right$/i)?r.right=b(window).width()-e.left-(o.positionAtElement.outerWidth()+d.outerWidth())/2:r.right="",o.fixedVertical.match(/^top$/i)?r.top=e.top-b(window).scrollTop()-d.outerHeight():r.top="",o.fixedVertical.match(/^bottom$/i)?r.bottom=b(window).scrollTop()+b(window).height()-e.top+o.offsetTop:r.bottom="",o.deltaDirection.match(/^left|right$/i)&&(o.fixedVertical.match(/^top$/i)?r.top=r.top+d.outerHeight()/2+o.positionAtElement.outerHeight()/2:r.bottom=r.bottom-d.outerHeight()/2-o.positionAtElement.outerHeight()/2),o.deltaDirection.match(/^left$/i)?o.fixedHorizontal.match(/^left$/i)?r.left=r.left-d.outerWidth():r.right=r.right+d.outerWidth()/2:o.deltaDirection.match(/^right$/i)?o.fixedHorizontal.match(/^left$/i)?r.left=r.left:r.right=r.right-d.outerWidth()/2:(o.deltaDirection.match(/^down$/i)&&(o.fixedVertical.match(/^top$/i)?r.top=r.top+d.outerHeight()+o.positionAtElement.outerHeight():r.bottom=r.bottom-d.outerHeight()-o.positionAtElement.outerHeight()),o.fixedHorizontal.match(/^left$/i)&&(r.left=r.left-d.outerWidth()/2)),o.deltaDirection.match(/^up|right$/i)&&o.fixedHorizontal.match(/^left|right$/i)?r.delta=o.deltaPosition:r.delta=-o.deltaPosition):o.positionAt.match(/^element$/i)?(e=o.positionAtElement.offset(),o.deltaDirection.match(/^up$/i)?(r.top=e.top+o.offsetTop-d.outerHeight(),r.left=e.left+o.offsetLeft+(o.positionAtElement.outerWidth()-d.outerWidth())/2,r.delta=o.deltaPosition):o.deltaDirection.match(/^down$/i)?(r.top=e.top+o.positionAtElement.outerHeight()+o.offsetTop,r.left=e.left+o.offsetLeft+(o.positionAtElement.outerWidth()-d.outerWidth())/2,r.delta=-o.deltaPosition):o.deltaDirection.match(/^left$/i)?(r.top=e.top+o.offsetTop+(o.positionAtElement.outerHeight()-d.outerHeight())/2,r.left=e.left+o.offsetLeft-d.outerWidth(),r.delta=o.deltaPosition):o.deltaDirection.match(/^right$/i)&&(r.top=e.top+o.offsetTop+(o.positionAtElement.outerHeight()-d.outerHeight())/2,r.left=e.left+o.positionAtElement.outerWidth()+o.offsetLeft,r.delta=-o.deltaPosition)):o.positionAt.match(/^body$/i)?o.deltaDirection.match(/^up|left$/i)?(r.top=o.offsetTop,r.left=o.offsetLeft,r.delta=o.deltaPosition):(o.deltaDirection.match(/^down$/i)?(r.top=parseInt(o.offsetTop+d.outerHeight(),10),r.left=o.offsetLeft):(r.top=o.offsetTop,r.left=parseInt(o.offsetLeft+d.outerWidth(),10)),r.delta=-o.deltaPosition):o.positionAt.match(/^mouse$/i)&&(o.deltaDirection.match(/^up|left$/i)?(o.deltaDirection.match(/^up$/i)?(r.top=-(o.offsetTop+d.outerHeight()),r.left=o.offsetLeft):o.deltaDirection.match(/^left$/i)&&(r.top=o.offsetTop,r.left=-(o.offsetLeft+d.outerWidth())),r.delta=o.deltaPosition):(r.top=o.offsetTop,r.left=o.offsetLeft,r.delta=-o.deltaPosition)),o.position.match(/^fixed$/i)?o.positionAt.match(/^element|body$/i)&&d.css({position:"fixed",left:r.left,top:r.top,right:r.right+"px",bottom:r.bottom+"px"}):o.positionAt.match(/^element|body$/i)&&d.css({position:"absolute",top:r.top+"px",left:r.left+"px"})}return i=b(this),a=b(t),p=y++,o={id:"",position:"absolute",fixedHorizontal:"right",fixedVertical:"bottom",positionAt:"element",positionAtElement:i,offsetTop:0,offsetLeft:0,deltaPosition:30,deltaDirection:"up",animationDuration:250,animationEasing:"swing",delayShow:0,delayHide:500,calculateOnShow:!1},n&&(o=b.extend(o,n)),l=s=null,u=c=!(r={top:0,left:0,right:0,bottom:0,delta:0,mouseTop:0,mouseLeft:0,tipHeight:0}),i.data("bubbletip_tips")?i.data("bubbletip_tips",b.merge(i.data("bubbletip_tips"),[[a.get(0).id,p]])):i.data("bubbletip_tips",[[a.get(0).id,p]]),o.fixedVertical.match(/^top|bottom$/i)||(o.positionAt="top"),o.fixedHorizontal.match(/^left|right$/i)||(o.positionAt="left"),o.positionAt.match(/^element|body|mouse$/i)||(o.positionAt="element"),o.deltaDirection.match(/^up|down|left|right$/i)||(o.deltaDirection="up"),0<o.id.length&&(o.id=' id="'+o.id+'"'),o.deltaDirection.match(/^up$/i)?d=b("<table"+o.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td class="bt-top"></td><td class="bt-topright"></td></tr><tr><td class="bt-left"></td><td class="bt-content"></td><td class="bt-right"></td></tr><tr><td class="bt-bottomleft"></td><td><table class="bt-bottom" cellspacing="0" cellpadding="0"><tr><th></th><td><div></div></td><th></th></tr></table></td><td class="bt-bottomright"></td></tr></tbody></table>'):o.deltaDirection.match(/^down$/i)?d=b("<table"+o.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td><table class="bt-top" cellspacing="0" cellpadding="0"><tr><th></th><td><div></div></td><th></th></tr></table></td><td class="bt-topright"></td></tr><tr><td class="bt-left"></td><td class="bt-content"></td><td class="bt-right"></td></tr><tr><td class="bt-bottomleft"></td><td class="bt-bottom"></td><td class="bt-bottomright"></td></tr></tbody></table>'):o.deltaDirection.match(/^left$/i)?d=b("<table"+o.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td class="bt-top"></td><td class="bt-topright"></td></tr><tr><td class="bt-left"></td><td class="bt-content"></td><td class="bt-right-tail"><div class="bt-right"></div><div class="bt-right-tail"></div><div class="bt-right"></div></td></tr><tr><td class="bt-bottomleft"></td><td class="bt-bottom"></td><td class="bt-bottomright"></td></tr></tbody></table>'):o.deltaDirection.match(/^right$/i)&&(d=b("<table"+o.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td class="bt-top"></td><td class="bt-topright"></td></tr><tr><td class="bt-left-tail"><div class="bt-left"></div><div class="bt-left-tail"></div><div class="bt-left"></div></td><td class="bt-content"></td><td class="bt-right"></td></tr><tr><td class="bt-bottomleft"></td><td class="bt-bottom"></td><td class="bt-bottomright"></td></tr></tbody></table>')),d.appendTo("body"),/msie/.test(navigator.userAgent.toLowerCase())&&!/opera/.test(navigator.userAgent.toLowerCase())&&b("*",d).each(function(){var e=b(this).css("background-image");e.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(e=RegExp.$1,b(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod="+("no-repeat"==b(this).css("backgroundRepeat")?"crop":"scale")+", src='"+e+"')"}).each(function(){var e=b(this).css("position");"absolute"!=e&&"relative"!=e&&b(this).css("position","relative")}))}),b(".bt-content",d).append(a),a.show(),o.deltaDirection.match(/^left|right$/i)&&(r.tipHeight=parseInt(a.height()/2,10),a.height()%2==1&&r.tipHeight++,r.tipHeight=r.tipHeight<20?1:r.tipHeight-20,o.deltaDirection.match(/^left$/i)?b("div.bt-right",d).css("height",r.tipHeight+"px"):b("div.bt-left",d).css("height",r.tipHeight+"px")),d.css("opacity",0),d.css({width:d.width(),height:d.height()}),v(),d.hide(),b(window).bind("resize.bubbletip"+p,function(){var e=b(window).width(),t=b(window).height();o.position.match(/^fixed$/i)||e===f&&t===h||(f=e,h=t,l&&clearTimeout(l),l=setTimeout(function(){v()},250))}),b([d.get(0),this.get(0)]).bind("open.bubbletip",function(){return c=!1,s&&clearTimeout(s),0===o.delayShow?g():s=setTimeout(function(){g()},o.delayShow),!1}),b([d.get(0),this.get(0)]).bind("close.bubbletip",function(){return s&&clearTimeout(s),0===o.delayHide?m():s=setTimeout(function(){m()},o.delayHide),!1}),this},removeBubbletip:function(e){var t,n,i,a,o=[],r=[];for(t=b.makeArray(b(this).data("bubbletip_tips")),n=b.makeArray(e),i=0;i<n.length;i++)o.push(b(n[i]).get(0).id);for(i=0;i<t.length;i++)if(null,0===o.length||0<=b.inArray(t[i][0],o)){for(a=b("#"+t[i][0]).get(0).parentNode;"table"!=a.tagName.toLowerCase();)a=a.parentNode;b("#"+t[i][0]).appendTo("body").hide(),b(a).remove(),b(this).unbind(".bubbletip"+t[i][1]),b(window).unbind(".bubbletip"+t[i][1])}else r.push(t[i]);return b(this).data("bubbletip_tips",r),this}})}(jQuery),function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,n=window.Cookies=e(window.jQuery);n.noConflict=function(){return window.Cookies=t,n}}}(function(){function f(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function e(d){function p(e,t,n){var i;if(1<arguments.length){if("number"==typeof(n=f({path:"/"},p.defaults,n)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*n.expires),n.expires=a}try{i=JSON.stringify(t),/^[\{\[]/.test(i)&&(t=i)}catch(e){}return t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[e,"=",t,n.expires&&"; expires="+n.expires.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.secure?"; secure":""].join("")}e||(i={});for(var o=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,s=0;s<o.length;s++){var l=o[s].split("="),c=l[0].replace(r,decodeURIComponent),u=l.slice(1).join("=");'"'===u.charAt(0)&&(u=u.slice(1,-1));try{if(u=d&&d(u,c)||u.replace(r,decodeURIComponent),this.json)try{u=JSON.parse(u)}catch(e){}if(e===c){i=u;break}e||(i[c]=u)}catch(e){}}return i}return p.get=p.set=p,p.getJSON=function(){return p.apply({json:!0},[].slice.call(arguments))},p.defaults={},p.remove=function(e,t){p(e,"",f(t,{expires:-1}))},p.withConverter=e,p}()}),function(a,n,L,p){"use strict";var o=L("html"),r=L(a),c=L(n),B=L.fancybox=function(){B.open.apply(this,arguments)},s=navigator.userAgent.match(/msie/i),l=null,u=n.createTouch!==p,f=function(e){return e&&e.hasOwnProperty&&e instanceof L},h=function(e){return e&&"string"===L.type(e)},N=function(e){return h(e)&&0<e.indexOf("%")},P=function(e,t){var n=parseInt(e,10)||0;return t&&N(e)&&(n=B.getViewport()[t]/100*n),Math.ceil(n)},H=function(e,t){return P(e,t)+"px"};L.extend(B,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!u,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(s?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:L.noop,beforeLoad:L.noop,afterLoad:L.noop,beforeShow:L.noop,afterShow:L.noop,beforeChange:L.noop,beforeClose:L.noop,afterClose:L.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(u,d){if(u&&(L.isPlainObject(d)||(d={}),!1!==B.close(!0)))return L.isArray(u)||(u=f(u)?L(u).get():[u]),L.each(u,function(e,t){var n,i,a,o,r,s,l,c={};"object"===L.type(t)&&(t.nodeType&&(t=L(t)),f(t)?(c={href:t.data("fancybox-href")||t.attr("href"),title:t.data("fancybox-title")||t.attr("title"),isDom:!0,element:t},L.metadata&&L.extend(!0,c,t.metadata())):c=t),n=d.href||c.href||(h(t)?t:null),i=d.title!==p?d.title:c.title||"",!(o=(a=d.content||c.content)?"html":d.type||c.type)&&c.isDom&&((o=t.data("fancybox-type"))||(o=(r=t.prop("class").match(/fancybox\.(\w+)/))?r[1]:null)),h(n)&&(o||(B.isImage(n)?o="image":B.isSWF(n)?o="swf":"#"===n.charAt(0)?o="inline":h(t)&&(o="html",a=t)),"ajax"===o&&(n=(s=n.split(/\s+/,2)).shift(),l=s.shift())),a||("inline"===o?n?a=L(h(n)?n.replace(/.*(?=#[^\s]+$)/,""):n):c.isDom&&(a=t):"html"===o?a=n:o||n||!c.isDom||(o="inline",a=t)),L.extend(c,{href:n,type:o,content:a,title:i,selector:l}),u[e]=c}),B.opts=L.extend(!0,{},B.defaults,d),d.keys!==p&&(B.opts.keys=!!d.keys&&L.extend({},B.defaults.keys,d.keys)),B.group=u,B._start(B.opts.index)},cancel:function(){var e=B.coming;e&&!1!==B.trigger("onCancel")&&(B.hideLoading(),B.ajaxLoad&&B.ajaxLoad.abort(),B.ajaxLoad=null,B.imgPreload&&(B.imgPreload.onload=B.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),B.coming=null,B.current||B._afterZoomOut(e))},close:function(e){B.cancel(),!1!==B.trigger("beforeClose")&&(B.unbindEvents(),B.isActive&&(B.isOpen&&!0!==e?(B.isOpen=B.isOpened=!1,B.isClosing=!0,L(".fancybox-item, .fancybox-nav").remove(),B.wrap.stop(!0,!0).removeClass("fancybox-opened"),B.transitions[B.current.closeMethod]()):(L(".fancybox-wrap").stop(!0).trigger("onReset").remove(),B._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(B.player.timer)},n=function(){t(),B.current&&B.player.isActive&&(B.player.timer=setTimeout(B.next,B.current.playSpeed))},i=function(){t(),c.unbind(".player"),B.player.isActive=!1,B.trigger("onPlayEnd")};!0===e||!B.player.isActive&&!1!==e?B.current&&(B.current.loop||B.current.index<B.group.length-1)&&(B.player.isActive=!0,c.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":n,"beforeLoad.player":t}),n(),B.trigger("onPlayStart")):i()},next:function(e){var t=B.current;t&&(h(e)||(e=t.direction.next),B.jumpto(t.index+1,e,"next"))},prev:function(e){var t=B.current;t&&(h(e)||(e=t.direction.prev),B.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,n){var i=B.current;i&&(e=P(e),B.direction=t||i.direction[e>=i.index?"next":"prev"],B.router=n||"jumpto",i.loop&&(e<0&&(e=i.group.length+e%i.group.length),e%=i.group.length),i.group[e]!==p&&(B.cancel(),B._start(e)))},reposition:function(e,t){var n,i=B.current,a=i?i.wrap:null;a&&(n=B._getPosition(t),e&&"scroll"===e.type?(delete n.position,a.stop(!0,!0).animate(n,200)):(a.css(n),i.pos=L.extend({},i.dim,n)))},update:function(t){var n=t&&t.type,i=!n||"orientationchange"===n;i&&(clearTimeout(l),l=null),B.isOpen&&!l&&(l=setTimeout(function(){var e=B.current;e&&!B.isClosing&&(B.wrap.removeClass("fancybox-tmp"),(i||"load"===n||"resize"===n&&e.autoResize)&&B._setDimension(),"scroll"===n&&e.canShrink||B.reposition(t),B.trigger("onUpdate"),l=null)},i&&!u?0:300))},toggle:function(e){B.isOpen&&(B.current.fitToView="boolean"===L.type(e)?e:!B.current.fitToView,u&&(B.wrap.removeAttr("style").addClass("fancybox-tmp"),B.trigger("onUpdate")),B.update())},hideLoading:function(){c.unbind(".loading"),L("#fancybox-loading").remove()},showLoading:function(){var e,t;B.hideLoading(),e=L('<div id="fancybox-loading"><div></div></div>').click(B.cancel).appendTo("body"),c.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),B.cancel())}),B.defaults.fixed||(t=B.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var e=B.current&&B.current.locked||!1,t={x:r.scrollLeft(),y:r.scrollTop()};return e?(t.w=e[0].clientWidth,t.h=e[0].clientHeight):(t.w=u&&a.innerWidth?a.innerWidth:r.width(),t.h=u&&a.innerHeight?a.innerHeight:r.height()),t},unbindEvents:function(){B.wrap&&f(B.wrap)&&B.wrap.unbind(".fb"),c.unbind(".fb"),r.unbind(".fb")},bindEvents:function(){var t,l=B.current;l&&(r.bind("orientationchange.fb"+(u?"":" resize.fb")+(l.autoCenter&&!l.locked?" scroll.fb":""),B.update),(t=l.keys)&&c.bind("keydown.fb",function(n){var i=n.which||n.keyCode,e=n.target||n.srcElement;if(27===i&&B.coming)return!1;n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||e&&(e.type||L(e).is("[contenteditable]"))||L.each(t,function(e,t){return 1<l.group.length&&t[i]!==p?(B[e](t[i]),n.preventDefault(),!1):-1<L.inArray(i,t)?(B[e](),n.preventDefault(),!1):void 0})}),L.fn.mousewheel&&l.mouseWheel&&B.wrap.bind("mousewheel.fb",function(e,t,n,i){for(var a,o=e.target||null,r=L(o),s=!1;r.length&&!(s||r.is(".fancybox-skin")||r.is(".fancybox-wrap"));)s=(a=r[0])&&!(a.style.overflow&&"hidden"===a.style.overflow)&&(a.clientWidth&&a.scrollWidth>a.clientWidth||a.clientHeight&&a.scrollHeight>a.clientHeight),r=L(r).parent();0===t||s||1<B.group.length&&!l.canShrink&&(0<i||0<n?B.prev(0<i?"down":"left"):(i<0||n<0)&&B.next(i<0?"up":"right"),e.preventDefault())}))},trigger:function(n,e){var t,i=e||B.coming||B.current;if(i){if(L.isFunction(i[n])&&(t=i[n].apply(i,Array.prototype.slice.call(arguments,1))),!1===t)return!1;i.helpers&&L.each(i.helpers,function(e,t){t&&B.helpers[e]&&L.isFunction(B.helpers[e][n])&&B.helpers[e][n](L.extend(!0,{},B.helpers[e].defaults,t),i)}),c.trigger(n)}},isImage:function(e){return h(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return h(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,n,i,a,o,r={};if(e=P(e),!(t=B.group[e]||null))return!1;if(a=(r=L.extend(!0,{},B.opts,t)).margin,o=r.padding,"number"===L.type(a)&&(r.margin=[a,a,a,a]),"number"===L.type(o)&&(r.padding=[o,o,o,o]),r.modal&&L.extend(!0,r,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),r.autoSize&&(r.autoWidth=r.autoHeight=!0),"auto"===r.width&&(r.autoWidth=!0),"auto"===r.height&&(r.autoHeight=!0),r.group=B.group,r.index=e,B.coming=r,!1!==B.trigger("beforeLoad")){if(i=r.type,n=r.href,!i)return B.coming=null,!(!B.current||!B.router||"jumpto"===B.router)&&(B.current.index=e,B[B.router](B.direction));if(B.isActive=!0,"image"!==i&&"swf"!==i||(r.autoHeight=r.autoWidth=!1,r.scrolling="visible"),"image"===i&&(r.aspectRatio=!0),"iframe"===i&&u&&(r.scrolling="scroll"),r.wrap=L(r.tpl.wrap).addClass("fancybox-"+(u?"mobile":"desktop")+" fancybox-type-"+i+" fancybox-tmp "+r.wrapCSS).appendTo(r.parent||"body"),L.extend(r,{skin:L(".fancybox-skin",r.wrap),outer:L(".fancybox-outer",r.wrap),inner:L(".fancybox-inner",r.wrap)}),L.each(["Top","Right","Bottom","Left"],function(e,t){r.skin.css("padding"+t,H(r.padding[e]))}),B.trigger("onReady"),"inline"===i||"html"===i){if(!r.content||!r.content.length)return B._error("content")}else if(!n)return B._error("href");"image"===i?B._loadImage():"ajax"===i?B._loadAjax():"iframe"===i?B._loadIframe():B._afterLoad()}else B.coming=null},_error:function(e){L.extend(B.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:B.coming.tpl.error}),B._afterLoad()},_loadImage:function(){var e=B.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,B.coming.width=this.width/B.opts.pixelRatio,B.coming.height=this.height/B.opts.pixelRatio,B._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,B._error("image")},e.src=B.coming.href,!0!==e.complete&&B.showLoading()},_loadAjax:function(){var n=B.coming;B.showLoading(),B.ajaxLoad=L.ajax(L.extend({},n.ajax,{url:n.href,error:function(e,t){B.coming&&"abort"!==t?B._error("ajax",e):B.hideLoading()},success:function(e,t){"success"===t&&(n.content=e,B._afterLoad())}}))},_loadIframe:function(){var e=B.coming,t=L(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",u?"auto":e.iframe.scrolling).attr("src",e.href);L(e.wrap).bind("onReset",function(){try{L(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(B.showLoading(),t.one("load",function(){L(this).data("ready",1),u||L(this).bind("load.fb",B.update),L(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),B._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||B._afterLoad()},_preloadImages:function(){var e,t,n=B.group,i=B.current,a=n.length,o=i.preload?Math.min(i.preload,a-1):0;for(t=1;t<=o;t+=1)"image"===(e=n[(i.index+t)%a]).type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,n,t,i,a,o,r=B.coming,s=B.current,l="fancybox-placeholder";if(B.hideLoading(),r&&!1!==B.isActive){if(!1===B.trigger("afterLoad",r,s))return r.wrap.stop(!0).trigger("onReset").remove(),void(B.coming=null);switch(s&&(B.trigger("beforeChange",s),s.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),B.unbindEvents(),n=(e=r).content,t=r.type,i=r.scrolling,L.extend(B,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:s}),a=e.href,t){case"inline":case"ajax":case"html":e.selector?n=L("<div>").html(n).find(e.selector):f(n)&&(n.data(l)||n.data(l,L('<div class="'+l+'"></div>').insertAfter(n).hide()),n=n.show().detach(),e.wrap.bind("onReset",function(){L(this).find(n).length&&n.hide().replaceAll(n.data(l)).data(l,!1)}));break;case"image":n=e.tpl.image.replace("{href}",a);break;case"swf":n='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+a+'"></param>',o="",L.each(e.swf,function(e,t){n+='<param name="'+e+'" value="'+t+'"></param>',o+=" "+e+'="'+t+'"'}),n+='<embed src="'+a+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"></embed></object>"}f(n)&&n.parent().is(e.inner)||e.inner.append(n),B.trigger("beforeShow"),e.inner.css("overflow","yes"===i?"scroll":"no"===i?"hidden":i),B._setDimension(),B.reposition(),B.isOpen=!1,B.coming=null,B.bindEvents(),B.isOpened?s.prevMethod&&B.transitions[s.prevMethod]():L(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),B.transitions[B.isOpened?e.nextMethod:e.openMethod](),B._preloadImages()}},_setDimension:function(){var e,t,n,i,a,o,r,s,l,c,u,d,p,f,h,g,m,v=B.getViewport(),b=0,y=B.wrap,w=B.skin,x=B.inner,S=B.current,C=S.width,E=S.height,T=S.minWidth,I=S.minHeight,O=S.maxWidth,k=S.maxHeight,_=S.scrolling,A=S.scrollOutside?S.scrollbarWidth:0,M=S.margin,j=P(M[1]+M[3]),D=P(M[0]+M[2]);if(y.add(w).add(x).width("auto").height("auto").removeClass("fancybox-tmp"),a=j+(n=P(w.outerWidth(!0)-w.width())),o=D+(i=P(w.outerHeight(!0)-w.height())),r=N(C)?(v.w-a)*P(C)/100:C,s=N(E)?(v.h-o)*P(E)/100:E,"iframe"===S.type){if(g=S.content,S.autoHeight&&1===g.data("ready"))try{g[0].contentWindow.document.location&&(x.width(r).height(9999),m=g.contents().find("body"),A&&m.css("overflow-x","hidden"),s=m.outerHeight(!0))}catch(e){}}else(S.autoWidth||S.autoHeight)&&(x.addClass("fancybox-tmp"),S.autoWidth||x.width(r),S.autoHeight||x.height(s),S.autoWidth&&(r=x.width()),S.autoHeight&&(s=x.height()),x.removeClass("fancybox-tmp"));if(C=P(r),E=P(s),u=r/s,T=P(N(T)?P(T,"w")-a:T),O=P(N(O)?P(O,"w")-a:O),I=P(N(I)?P(I,"h")-o:I),l=O,c=k=P(N(k)?P(k,"h")-o:k),S.fitToView&&(O=Math.min(v.w-a,O),k=Math.min(v.h-o,k)),f=v.w-j,h=v.h-D,S.aspectRatio?(O<C&&(E=P((C=O)/u)),k<E&&(C=P((E=k)*u)),C<T&&(E=P((C=T)/u)),E<I&&(C=P((E=I)*u))):(C=Math.max(T,Math.min(C,O)),S.autoHeight&&"iframe"!==S.type&&(x.width(C),E=x.height()),E=Math.max(I,Math.min(E,k))),S.fitToView)if(x.width(C).height(E),y.width(C+n),d=y.width(),p=y.height(),S.aspectRatio)for(;(f<d||h<p)&&T<C&&I<E&&!(19<b++);)E=Math.max(I,Math.min(k,E-10)),(C=P(E*u))<T&&(E=P((C=T)/u)),O<C&&(E=P((C=O)/u)),x.width(C).height(E),y.width(C+n),d=y.width(),p=y.height();else C=Math.max(T,Math.min(C,C-(d-f))),E=Math.max(I,Math.min(E,E-(p-h)));A&&"auto"===_&&E<s&&C+n+A<f&&(C+=A),x.width(C).height(E),y.width(C+n),d=y.width(),p=y.height(),e=(f<d||h<p)&&T<C&&I<E,t=S.aspectRatio?C<l&&E<c&&C<r&&E<s:(C<l||E<c)&&(C<r||E<s),L.extend(S,{dim:{width:H(d),height:H(p)},origWidth:r,origHeight:s,canShrink:e,canExpand:t,wPadding:n,hPadding:i,wrapSpace:p-w.outerHeight(!0),skinSpace:w.height()-E}),!g&&S.autoHeight&&I<E&&E<k&&!t&&x.height("auto")},_getPosition:function(e){var t=B.current,n=B.getViewport(),i=t.margin,a=B.wrap.width()+i[1]+i[3],o=B.wrap.height()+i[0]+i[2],r={position:"absolute",top:i[0],left:i[3]};return t.autoCenter&&t.fixed&&!e&&o<=n.h&&a<=n.w?r.position="fixed":t.locked||(r.top+=n.y,r.left+=n.x),r.top=H(Math.max(r.top,r.top+(n.h-o)*t.topRatio)),r.left=H(Math.max(r.left,r.left+(n.w-a)*t.leftRatio)),r},_afterZoomIn:function(){var t=B.current;t&&(B.isOpen=B.isOpened=!0,B.wrap.css("overflow","visible").addClass("fancybox-opened"),B.update(),(t.closeClick||t.nextClick&&1<B.group.length)&&B.inner.css("cursor","pointer").bind("click.fb",function(e){L(e.target).is("a")||L(e.target).parent().is("a")||(e.preventDefault(),B[t.closeClick?"close":"next"]())}),t.closeBtn&&L(t.tpl.closeBtn).appendTo(B.skin).bind("click.fb",function(e){e.preventDefault(),B.close()}),t.arrows&&1<B.group.length&&((t.loop||0<t.index)&&L(t.tpl.prev).appendTo(B.outer).bind("click.fb",B.prev),(t.loop||t.index<B.group.length-1)&&L(t.tpl.next).appendTo(B.outer).bind("click.fb",B.next)),B.trigger("afterShow"),t.loop||t.index!==t.group.length-1?B.opts.autoPlay&&!B.player.isActive&&(B.opts.autoPlay=!1,B.play()):B.play(!1))},_afterZoomOut:function(e){e=e||B.current,L(".fancybox-wrap").trigger("onReset").remove(),L.extend(B,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),B.trigger("afterClose",e)}}),B.transitions={getOrigPosition:function(){var e=B.current,t=e.element,n=e.orig,i={},a=50,o=50,r=e.hPadding,s=e.wPadding,l=B.getViewport();return!n&&e.isDom&&t.is(":visible")&&((n=t.find("img:first")).length||(n=t)),f(n)?(i=n.offset(),n.is("img")&&(a=n.outerWidth(),o=n.outerHeight())):(i.top=l.y+(l.h-o)*e.topRatio,i.left=l.x+(l.w-a)*e.leftRatio),("fixed"===B.wrap.css("position")||e.locked)&&(i.top-=l.y,i.left-=l.x),i={top:H(i.top-r*e.topRatio),left:H(i.left-s*e.leftRatio),width:H(a+s),height:H(o+r)}},step:function(e,t){var n,i,a=t.prop,o=B.current,r=o.wrapSpace,s=o.skinSpace;"width"!==a&&"height"!==a||(n=t.end===t.start?1:(e-t.start)/(t.end-t.start),B.isClosing&&(n=1-n),i=e-("width"===a?o.wPadding:o.hPadding),B.skin[a](P("width"===a?i:i-r*n)),B.inner[a](P("width"===a?i:i-r*n-s*n)))},zoomIn:function(){var e=B.current,t=e.pos,n=e.openEffect,i="elastic"===n,a=L.extend({opacity:1},t);delete a.position,i?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1),B.wrap.css(t).animate(a,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:i?this.step:null,complete:B._afterZoomIn})},zoomOut:function(){var e=B.current,t=e.closeEffect,n="elastic"===t,i={opacity:.1};n&&(i=this.getOrigPosition(),e.closeOpacity&&(i.opacity=.1)),B.wrap.animate(i,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:B._afterZoomOut})},changeIn:function(){var e,t=B.current,n=t.nextEffect,i=t.pos,a={opacity:1},o=B.direction;i.opacity=.1,"elastic"===n&&(e="down"===o||"up"===o?"top":"left","down"===o||"right"===o?(i[e]=H(P(i[e])-200),a[e]="+=200px"):(i[e]=H(P(i[e])+200),a[e]="-=200px")),"none"===n?B._afterZoomIn():B.wrap.css(i).animate(a,{duration:t.nextSpeed,easing:t.nextEasing,complete:B._afterZoomIn})},changeOut:function(){var e=B.previous,t=e.prevEffect,n={opacity:.1},i=B.direction;"elastic"===t&&(n["down"===i||"up"===i?"top":"left"]=("up"===i||"left"===i?"-":"+")+"=200px"),e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){L(this).trigger("onReset").remove()}})}},B.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!u,fixed:!0},overlay:null,fixed:!1,el:L("html"),create:function(e){e=L.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=L('<div class="fancybox-overlay"></div>').appendTo(B.coming?B.coming.parent:e.parent),this.fixed=!1,e.fixed&&B.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=L.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(r.bind("resize.overlay",L.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){if(L(e.target).hasClass("fancybox-overlay"))return B.isActive?B.close():t.close(),!1}),this.overlay.css(e.css).show()},close:function(){var e,t;r.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(L(".fancybox-margin").removeClass("fancybox-margin"),e=r.scrollTop(),t=r.scrollLeft(),this.el.removeClass("fancybox-lock"),r.scrollTop(e).scrollLeft(t)),L(".fancybox-overlay").remove().hide(),L.extend(this,{overlay:null,fixed:!1})},update:function(){var e,t="100%";this.overlay.width(t).height("100%"),s?(e=Math.max(n.documentElement.offsetWidth,n.body.offsetWidth),c.width()>e&&(t=c.width())):c.width()>r.width()&&(t=c.width()),this.overlay.width(t).height(c.height())},onReady:function(e,t){var n=this.overlay;L(".fancybox-overlay").stop(!0,!0),n||this.create(e),e.locked&&this.fixed&&t.fixed&&(n||(this.margin=c.height()>r.height()&&L("html").css("margin-right").replace("px","")),t.locked=this.overlay.append(t.wrap),t.fixed=!1),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var n,i;t.locked&&(!1!==this.margin&&(L("*").filter(function(){return"fixed"===L(this).css("position")&&!L(this).hasClass("fancybox-overlay")&&!L(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=r.scrollTop(),i=r.scrollLeft(),this.el.addClass("fancybox-lock"),r.scrollTop(n).scrollLeft(i)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!B.coming&&this.overlay.fadeOut(e.speedOut,L.proxy(this.close,this))}},B.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t,n,i=B.current,a=i.title,o=e.type;if(L.isFunction(a)&&(a=a.call(i.element,i)),h(a)&&""!==L.trim(a)){switch(t=L('<div class="fancybox-title fancybox-title-'+o+'-wrap">'+a+"</div>"),o){case"inside":n=B.skin;break;case"outside":n=B.wrap;break;case"over":n=B.inner;break;default:n=B.skin,t.appendTo("body"),s&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),B.current.margin[2]+=Math.abs(P(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](n)}}},L.fn.fancybox=function(o){var r,s=L(this),l=this.selector||"",e=function(e){var t,n,i=L(this).blur(),a=r;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||i.is(".fancybox-wrap")||(t=o.groupAttr||"data-fancybox-group",(n=i.attr(t))||(t="rel",n=i.get(0)[t]),n&&""!==n&&"nofollow"!==n&&(a=(i=(i=l.length?L(l):s).filter("["+t+'="'+n+'"]')).index(this)),o.index=a,!1!==B.open(i,o)&&e.preventDefault())};return r=(o=o||{}).index||0,l&&!1!==o.live?c.undelegate(l,"click.fb-start").delegate(l+":not('.fancybox-item, .fancybox-nav')","click.fb-start",e):s.unbind("click.fb-start").bind("click.fb-start",e),this.filter("[data-fancybox-start=1]").trigger("click"),this},c.ready(function(){var e,t,n,i;L.scrollbarWidth===p&&(L.scrollbarWidth=function(){var e=L('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),n=t.innerWidth()-t.height(99).innerWidth();return e.remove(),n}),L.support.fixedPosition===p&&(L.support.fixedPosition=(n=L('<div style="position:fixed;top:20px;"></div>').appendTo("body"),i=20===n[0].offsetTop||15===n[0].offsetTop,n.remove(),i)),L.extend(B.defaults,{scrollbarWidth:L.scrollbarWidth(),fixed:L.support.fixedPosition,parent:L("body")}),e=L(a).width(),o.addClass("fancybox-lock-test"),t=L(a).width(),o.removeClass("fancybox-lock-test"),L("<style type='text/css'>.fancybox-margin{margin-right:"+(t-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function($){"use strict";var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(e){if(null===e)return"null";var t,n,i,a,o=$.type(e);if("undefined"!==o){if("number"===o||"boolean"===o)return String(e);if("string"===o)return $.quoteString(e);if("function"==typeof e.toJSON)return $.toJSON(e.toJSON());if("date"===o){var r=e.getUTCMonth()+1,s=e.getUTCDate(),l=e.getUTCFullYear(),c=e.getUTCHours(),u=e.getUTCMinutes(),d=e.getUTCSeconds(),p=e.getUTCMilliseconds();return r<10&&(r="0"+r),s<10&&(s="0"+s),c<10&&(c="0"+c),u<10&&(u="0"+u),d<10&&(d="0"+d),p<100&&(p="0"+p),p<10&&(p="0"+p),'"'+l+"-"+r+"-"+s+"T"+c+":"+u+":"+d+"."+p+'Z"'}if(t=[],$.isArray(e)){for(n=0;n<e.length;n++)t.push($.toJSON(e[n])||"null");return"["+t.join(",")+"]"}if("object"==typeof e){for(n in e)if(hasOwn.call(e,n)){if("number"===(o=typeof n))i='"'+n+'"';else{if("string"!==o)continue;i=$.quoteString(n)}"function"!==(o=typeof e[n])&&"undefined"!==o&&(a=$.toJSON(e[n]),t.push(i+":"+a))}return"{"+t.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(e){return e.match(escape)?'"'+e.replace(escape,function(e){var t=meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'}}(jQuery),function(S){function C(){}function E(e){O=[e]}function T(e,t,n){return e&&e.apply(t.context||t,n)}function I(e){return/\?/.test(e)?"&":"?"}var O,k="insertBefore",_="onclick",A="onerror",M="onreadystatechange",j="readyState",D="removeChild",L="<script>",B="success",N="timeout",P=window,H=S.Deferred,R=S("head")[0]||document.documentElement,$={},z=0,W={callback:"_jqjsp",url:location.href},F=P.opera,U=!!S("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length;function e(t){var e,n,i,a,o,r=(t=S.extend({},W,t)).success,s=t.error,l=t.complete,c=t.dataFilter,u=t.callbackParameter,d=t.callback,p=t.cache,f=t.pageCache,h=t.charset,g=t.url,m=t.data,v=t.timeout,b=0,y=C;if(H&&H(function(e){e.done(r).fail(s),r=e.resolve,s=e.reject}).promise(t),!(t.abort=function(){!b++&&y()})===T(t.beforeSend,t,[t])||b)return t;function w(e){b++||(y(),f&&($[g]={s:[e]}),c&&(e=c.apply(t,[e])),T(r,t,[e,B,t]),T(l,t,[t,B]))}function x(e){b++||(y(),f&&e!=N&&($[g]=e),T(s,t,[t,e]),T(l,t,[t,e]))}return g=g||"",m=m?"string"==typeof m?m:S.param(m,t.traditional):"",g+=m?I(g)+m:"",u&&(g+=I(g)+encodeURIComponent(u)+"=?"),!p&&!f&&(g+=I(g)+"_"+(new Date).getTime()+"="),g=g.replace(/=\?(&|$)/,"="+d+"$1"),f&&(e=$[g])?e.s?w(e.s[0]):x(e):(P[d]=E,(i=S(L)[0]).id="_jqjsp"+z++,h&&(i.charset=h),F&&F.version()<11.6?(a=S(L)[0]).text="document.getElementById('"+i.id+"')."+A+"()":i.async="async",U&&(i.htmlFor=i.id,i.event=_),i.onload=i[A]=i[M]=function(e){if(!i[j]||!/i/.test(i[j])){try{i[_]&&i[_]()}catch(e){}e=O,O=0,e?w(e[0]):x("error")}},i.src=g,y=function(e){o&&clearTimeout(o),i[M]=i.onload=i[A]=null,R[D](i),a&&R[D](a)},R[k](i,n=R.firstChild),a&&R[k](a,n),o=0<v&&setTimeout(function(){x(N)},v)),t}e.setup=function(e){S.extend(W,e)},S.jsonp=e}(jQuery),function(e){var o={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||e.parseJSON||e.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||e.toJSON};if(!("parse"in o&&"stringify"in o))throw new Error("JSON Library Required");var s,l={__jstorage_meta:{CRC32:{}}},n={jStorage:"{}"},i=null,t=0,a=!1,c={},r=!1,u=0,d={},p=+new Date,f={isXML:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName},encode:function(t){if(!this.isXML(t))return!1;try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return t.xml}catch(e){}}return!1},decode:function(e){var t,n="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return!!n&&(t=n.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),!!this.isXML(t)&&t)}};function h(){var e="{}";if("userDataBehavior"==a){i.load("jStorage");try{e=i.getAttribute("jStorage")}catch(e){}try{u=i.getAttribute("jStorage_update")}catch(e){}n.jStorage=e}b(),x(),S()}function g(){var e;clearTimeout(r),r=setTimeout(function(){if("localStorage"==a||"globalStorage"==a)e=n.jStorage_update;else if("userDataBehavior"==a){i.load("jStorage");try{e=i.getAttribute("jStorage_update")}catch(e){}}e&&e!=u&&(u=e,function(){var e,t=o.parse(o.stringify(l.__jstorage_meta.CRC32));h(),e=o.parse(o.stringify(l.__jstorage_meta.CRC32));var n,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)){if(!e[n]){a.push(n);continue}t[n]!=e[n]&&"2."==String(t[n]).substr(0,2)&&i.push(n)}for(n in e)e.hasOwnProperty(n)&&(t[n]||i.push(n));m(i,"updated"),m(a,"deleted")}())},25)}function m(e,t){if(e=[].concat(e||[]),"flushed"==t){for(var n in e=[],c)c.hasOwnProperty(n)&&e.push(n);t="deleted"}for(var i=0,a=e.length;i<a;i++){if(c[e[i]])for(var o=0,r=c[e[i]].length;o<r;o++)c[e[i]][o](e[i],t);if(c["*"])for(o=0,r=c["*"].length;o<r;o++)c["*"][o](e[i],t)}}function v(){var e=(+new Date).toString();if("localStorage"==a||"globalStorage"==a)try{n.jStorage_update=e}catch(e){a=!1}else"userDataBehavior"==a&&(i.setAttribute("jStorage_update",e),i.save("jStorage"));g()}function b(){if(n.jStorage)try{l=o.parse(String(n.jStorage))}catch(e){n.jStorage="{}"}else n.jStorage="{}";t=n.jStorage?String(n.jStorage).length:0,l.__jstorage_meta||(l.__jstorage_meta={}),l.__jstorage_meta.CRC32||(l.__jstorage_meta.CRC32={})}function y(){!function(){if(!l.__jstorage_meta.PubSub)return;for(var e=+new Date-2e3,t=0,n=l.__jstorage_meta.PubSub.length;t<n;t++)if(l.__jstorage_meta.PubSub[t][0]<=e){l.__jstorage_meta.PubSub.splice(t,l.__jstorage_meta.PubSub.length-t);break}l.__jstorage_meta.PubSub.length||delete l.__jstorage_meta.PubSub}();try{n.jStorage=o.stringify(l),i&&(i.setAttribute("jStorage",n.jStorage),i.save("jStorage")),t=n.jStorage?String(n.jStorage).length:0}catch(e){}}function w(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return!0}function x(){var e,t,n,i,a=1/0,o=!1,r=[];if(clearTimeout(s),l.__jstorage_meta&&"object"==typeof l.__jstorage_meta.TTL){for(t in e=+new Date,n=l.__jstorage_meta.TTL,i=l.__jstorage_meta.CRC32,n)n.hasOwnProperty(t)&&(n[t]<=e?(delete n[t],delete i[t],delete l[t],o=!0,r.push(t)):n[t]<a&&(a=n[t]));a!=1/0&&(s=setTimeout(Math.min(x,a-e,2147483647))),o&&(y(),v(),m(r,"deleted"))}}function S(){var e;if(l.__jstorage_meta.PubSub){var t,n=p;for(e=l.__jstorage_meta.PubSub.length-1;0<=e;e--)(t=l.__jstorage_meta.PubSub[e])[0]>p&&(n=t[0],C(t[1],t[2]));p=n}}function C(e,t){if(d[e])for(var n=0,i=d[e].length;n<i;n++)try{d[e][n](e,o.parse(o.stringify(t)))}catch(e){}}e.jStorage={version:"0.4.8",set:function(e,t,n){if(w(e),n=n||{},void 0===t)return this.deleteKey(e),t;if(f.isXML(t))t={_is_xml:!0,xml:f.encode(t)};else{if("function"==typeof t)return;t&&"object"==typeof t&&(t=o.parse(o.stringify(t)))}return l[e]=t,l.__jstorage_meta.CRC32[e]="2."+function(e,t){for(var n,i=e.length,a=t^i,o=0;4<=i;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:a^=(255&e.charCodeAt(o+2))<<16;case 2:a^=(255&e.charCodeAt(o+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(o)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0}(o.stringify(t),2538058380),this.setTTL(e,n.TTL||0),m(e,"updated"),t},get:function(e,t){return w(e),e in l?l[e]&&"object"==typeof l[e]&&l[e]._is_xml?f.decode(l[e].xml):l[e]:void 0===t?null:t},deleteKey:function(e){return w(e),e in l&&(delete l[e],"object"==typeof l.__jstorage_meta.TTL&&e in l.__jstorage_meta.TTL&&delete l.__jstorage_meta.TTL[e],delete l.__jstorage_meta.CRC32[e],y(),v(),m(e,"deleted"),!0)},setTTL:function(e,t){var n=+new Date;return w(e),t=Number(t)||0,e in l&&(l.__jstorage_meta.TTL||(l.__jstorage_meta.TTL={}),0<t?l.__jstorage_meta.TTL[e]=n+t:delete l.__jstorage_meta.TTL[e],y(),x(),v(),!0)},getTTL:function(e){var t=+new Date;return w(e),e in l&&l.__jstorage_meta.TTL&&l.__jstorage_meta.TTL[e]&&l.__jstorage_meta.TTL[e]-t||0},flush:function(){return l={__jstorage_meta:{CRC32:{}}},y(),v(),m(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=l,new e},index:function(){var e,t=[];for(e in l)l.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return t},currentBackend:function(){return a},storageAvailable:function(){return!!a},listenKeyChange:function(e,t){w(e),c[e]||(c[e]=[]),c[e].push(t)},stopListening:function(e,t){if(w(e),c[e])if(t)for(var n=c[e].length-1;0<=n;n--)c[e][n]==t&&c[e].splice(n,1);else delete c[e]},subscribe:function(e,t){if(!(e=(e||"").toString()))throw new TypeError("Channel not defined");d[e]||(d[e]=[]),d[e].push(t)},publish:function(e,t){if(!(e=(e||"").toString()))throw new TypeError("Channel not defined");var n,i;n=e,i=t,l.__jstorage_meta||(l.__jstorage_meta={}),l.__jstorage_meta.PubSub||(l.__jstorage_meta.PubSub=[]),l.__jstorage_meta.PubSub.unshift([+new Date,n,i]),y(),v()},reInit:function(){h()},noConflict:function(e){return delete window.$.jStorage,e&&(window.jStorage=this),this}},function(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(e){}if(e)try{window.localStorage&&(n=window.localStorage,a="localStorage",u=n.jStorage_update)}catch(e){}else if("globalStorage"in window)try{window.globalStorage&&(n="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],a="globalStorage",u=n.jStorage_update)}catch(e){}else{if(!(i=document.createElement("link")).addBehavior)return i=null;i.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(i);try{i.load("jStorage")}catch(e){i.setAttribute("jStorage","{}"),i.save("jStorage"),i.load("jStorage")}var t="{}";try{t=i.getAttribute("jStorage")}catch(e){}try{u=i.getAttribute("jStorage_update")}catch(e){}n.jStorage=t,a="userDataBehavior"}b(),x(),"localStorage"==a||"globalStorage"==a?"addEventListener"in window?window.addEventListener("storage",g,!1):document.attachEvent("onstorage",g):"userDataBehavior"==a&&setInterval(g,1e3),S(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&g()},!1)}()}(jQuery),function(a){var e=a.scrollTo=function(e,t,n){a(window).scrollTo(e,t,n)};function i(e){return"object"==typeof e?e:{top:e,left:e}}e.defaults={axis:"y",duration:1},e.window=function(e){return a(window).scrollable()},a.fn.scrollable=function(){return this.map(function(){var e=this.parentWindow||this.defaultView,t="#document"==this.nodeName?e.frameElement||e:this,n=t.contentDocument||(t.contentWindow||t).document,i=t.setInterval;return"IFRAME"==t.nodeName||i&&a.browser.safari?n.body:i?n.documentElement:this})},a.fn.scrollTo=function(t,n,v){return"object"==typeof n&&(v=n,n=0),"function"==typeof v&&(v={onAfter:v}),v=a.extend({},e.defaults,v),n=n||v.speed||v.duration,v.queue=v.queue&&1<v.axis.length,v.queue&&(n/=2),v.offset=i(v.offset),v.over=i(v.over),this.scrollable().each(function(){var u,d=this,p=a(d),f=t,h={},g=p.is("html,body");switch(typeof f){case"number":case"string":if(/^([+-]=)?\d+(px)?$/.test(f)){f=i(f);break}f=a(f,this);case"object":(f.is||f.style)&&(u=(f=a(f)).offset())}function m(e){p.animate(h,n,v.easing,e&&function(){e.call(this,t,v)})}a.each(v.axis.split(""),function(e,t){var n,i,a="x"==t?"Left":"Top",o=a.toLowerCase(),r="scroll"+a,s=d[r],l="x"==t?"Width":"Height",c=l.toLowerCase();u?(h[r]=u[o]+(g?0:s-p.offset()[o]),v.margin&&(h[r]-=parseInt(f.css("margin"+a))||0,h[r]-=parseInt(f.css("border"+a+"Width"))||0),h[r]+=v.offset[o]||0,v.over[o]&&(h[r]+=f[c]()*v.over[o])):h[r]=f[o],/^\d+$/.test(h[r])&&(h[r]=h[r]<=0?0:Math.min(h[r],(n="scroll"+l,i=d.ownerDocument,g?Math.max(i.documentElement[n],i.body[n]):d[n]))),!e&&v.queue&&(s!=h[r]&&m(v.onAfterFirst),delete h[r])}),m(v.onAfter)}).end()}}(jQuery),function(r){var e,t,n="[object OperaMini]"==Object.prototype.toString.call(window.operamini),i="placeholder"in document.createElement("input")&&!n,a="placeholder"in document.createElement("textarea")&&!n,o=r.valHooks,s=r.propHooks;if(i&&a)(t=r.fn.placeholder=function(){return this}).input=t.textarea=!0;else{var l={};(t=r.fn.placeholder=function(e){l=r.extend({},{customClass:"placeholder"},e);return this.filter((i?"textarea":":input")+"[placeholder]").not("."+l.customClass).bind({"focus.placeholder":c,"blur.placeholder":u}).data("placeholder-enabled",!0).trigger("blur.placeholder"),this}).input=i,t.textarea=a,e={get:function(e){var t=r(e),n=t.data("placeholder-password");return n?n[0].value:t.data("placeholder-enabled")&&t.hasClass(l.customClass)?"":e.value},set:function(e,t){var n=r(e),i=n.data("placeholder-password");return i?i[0].value=t:n.data("placeholder-enabled")?(""===t?(e.value=t,e!=d()&&u.call(e)):n.hasClass(l.customClass)&&c.call(e,!0,t)||(e.value=t),n):e.value=t}},i||(o.input=e,s.value=e),a||(o.textarea=e,s.value=e),r(function(){r(document).delegate("form","submit.placeholder",function(){var e=r("."+l.customClass,this).each(c);setTimeout(function(){e.each(u)},10)})}),r(window).bind("beforeunload.placeholder",function(){r("."+l.customClass).each(function(){this.value=""})})}function c(e,t){var n=this,i=r(n);if(n.value==i.attr("placeholder")&&i.hasClass(l.customClass))if(i.data("placeholder-password")){if(i=i.hide().nextAll('input[type="password"]:first').show().attr("id",i.removeAttr("id").data("placeholder-id")),!0===e)return i[0].value=t;i.focus()}else n.value="",i.removeClass(l.customClass),n==d()&&n.select()}function u(){var t,n,i,a,e=r(this),o=this.id;if(""===this.value){if("password"===this.type){if(!e.data("placeholder-textinput")){try{t=e.clone().attr({type:"text"})}catch(e){t=r("<input>").attr(r.extend((n=this,i={},a=/^jQuery\d+$/,r.each(n.attributes,function(e,t){t.specified&&!a.test(t.name)&&(i[t.name]=t.value)}),i),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":e,"placeholder-id":o}).bind("focus.placeholder",c),e.data({"placeholder-textinput":t,"placeholder-id":o}).before(t)}e=e.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",o).show()}e.addClass(l.customClass),e[0].value=e.attr("placeholder")}else e.removeClass(l.customClass)}function d(){try{return document.activeElement}catch(e){}}}(jQuery);var CryptoJS=CryptoJS||function(s,e){var t={},n=t.lib={},i=function(){},a=n.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var a=0;a<e;a++)t[i+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(i+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[i+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new l.init(t,e)}}),o=t.enc={},r=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new l.init(n,t/2)}},c=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new l.init(n,t)}},u=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,a=this.blockSize,o=i/(4*a);if(e=(o=e?s.ceil(o):s.max((0|o)-this._minBufferSize,0))*a,i=s.min(4*e,i),e){for(var r=0;r<e;r+=a)this._doProcessBlock(n,r);r=n.splice(0,e),t.sigBytes-=i}return new l.init(r,i)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new p.HMAC.init(n,t).finalize(e)}}});var p=t.algo={};return t}(Math);!function(){var e=CryptoJS,t=(i=e.lib).WordArray,n=i.Hasher,u=[],i=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],a=n[1],o=n[2],r=n[3],s=n[4],l=0;l<80;l++){if(l<16)u[l]=0|e[t+l];else{var c=u[l-3]^u[l-8]^u[l-14]^u[l-16];u[l]=c<<1|c>>>31}c=(i<<5|i>>>27)+s+u[l],c=l<20?c+(1518500249+(a&o|~a&r)):l<40?c+(1859775393+(a^o^r)):l<60?c+((a&o|a&r|o&r)-1894007588):c+((a^o^r)-899497514),s=r,r=o,o=a<<30|a>>>2,a=i,i=c}n[0]=n[0]+i|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+r|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(i),e.HmacSHA1=n._createHmacHelper(i)}();var Intercom=function(){var e=function(){};e.createInterface=function(i){var e={on:function(e,t){void 0===this[i]&&(this[i]={}),this[i].hasOwnProperty(e)||(this[i][e]=[]),this[i][e].push(t)},off:function(e,t){void 0!==this[i]&&this[i].hasOwnProperty(e)&&a.removeItem(t,this[i][e])},trigger:function(e){if(void 0!==this[i]&&this[i].hasOwnProperty(e))for(var t=Array.prototype.slice.call(arguments,1),n=0;n<this[i][e].length;n++)this[i][e][n].apply(this[i][e][n],t)}};return e};var t=e.createInterface("_handlers");e.prototype._on=t.on,e.prototype._off=t.off,e.prototype._trigger=t.trigger;var n=e.createInterface("handlers");e.prototype.on=function(){n.on.apply(this,arguments),Array.prototype.unshift.call(arguments,"on"),this._trigger.apply(this,arguments)},e.prototype.off=n.off,e.prototype.trigger=n.trigger;var c=window.localStorage;void 0===c&&(c={getItem:function(){},setItem:function(){},removeItem:function(){}});var i,a={};a.guid=(i=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}),a.throttle=function(t,n){var i=0;return function(){var e=(new Date).getTime();t<e-i&&(i=e,n.apply(this,arguments))}},a.extend=function(e,t){if(void 0!==e&&e||(e={}),"object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},a.removeItem=function(e,t){for(var n=t.length-1;0<=n;n--)t[n]===e&&t.splice(n,1);return t};var o=function(){var e=this,t=(new Date).getTime();this.origin=a.guid(),this.lastMessage=t,this.bindings=[],this.receivedIDs={},this.previousValues={};var n=function(){e._onStorageEvent.apply(e,arguments)};window.attachEvent?document.attachEvent("onstorage",n):window.addEventListener("storage",n,!1)};o.prototype._transaction=function(n){var i=this,a=!1,o=!1,r=null,s=function(){if(!a){var e=(new Date).getTime(),t=parseInt(c.getItem(u)||0);if(t&&e-t<1e3)return o||(i._on("storage",s),o=!0),void(r=window.setTimeout(s,20));a=!0,c.setItem(u,e),n(),l()}},l=function(){o&&i._off("storage",s),r&&window.clearTimeout(r),c.removeItem(u)};s()},o.prototype._cleanup_emit=a.throttle(100,function(){this._transaction(function(){for(var e=(new Date).getTime()-d,t=0,n=JSON.parse(c.getItem(s)||"[]"),i=n.length-1;0<=i;i--)n[i].timestamp<e&&(n.splice(i,1),t++);0<t&&c.setItem(s,JSON.stringify(n))})}),o.prototype._cleanup_once=a.throttle(100,function(){var i=this;this._transaction(function(){var e,t=JSON.parse(c.getItem(l)||"{}"),n=((new Date).getTime(),0);for(e in t)i._once_expired(e,t)&&(delete t[e],n++);0<n&&c.setItem(l,JSON.stringify(t))})}),o.prototype._once_expired=function(e,t){if(!t)return!0;if(!t.hasOwnProperty(e))return!0;if("object"!=typeof t[e])return!0;var n=t[e].ttl||p,i=(new Date).getTime();return t[e].timestamp<i-n},o.prototype._localStorageChanged=function(e,t){if(e&&e.key)return e.key===t;var n=c.getItem(t);return n!==this.previousValues[t]&&(this.previousValues[t]=n,!0)},o.prototype._onStorageEvent=function(e){e=e||window.event;var a=this;this._localStorageChanged(e,s)&&this._transaction(function(){for(var e=(new Date).getTime(),t=c.getItem(s),n=JSON.parse(t||"[]"),i=0;i<n.length;i++)if(n[i].origin!==a.origin&&!(n[i].timestamp<a.lastMessage)){if(n[i].id){if(a.receivedIDs.hasOwnProperty(n[i].id))continue;a.receivedIDs[n[i].id]=!0}a.trigger(n[i].name,n[i].payload)}a.lastMessage=e}),this._trigger("storage",e)},o.prototype._emit=function(n,i,e){if((e="string"==typeof e||"number"==typeof e?String(e):null)&&e.length){if(this.receivedIDs.hasOwnProperty(e))return;this.receivedIDs[e]=!0}var a={id:e,name:n,origin:this.origin,timestamp:(new Date).getTime(),payload:i},o=this;this._transaction(function(){var e=c.getItem(s)||"[]",t="[]"===e?"":",";e=[e.substring(0,e.length-1),t,JSON.stringify(a),"]"].join(""),c.setItem(s,e),o.trigger(n,i),window.setTimeout(function(){o._cleanup_emit()},50)})},o.prototype.bind=function(e,t){for(var n=0;n<o.bindings.length;n++){var i=o.bindings[n].factory(e,t||null,this);i&&this.bindings.push(i)}},o.prototype.emit=function(e,t){this._emit.apply(this,arguments),this._trigger("emit",e,t)},o.prototype.once=function(t,n,i){if(o.supported){var a=this;this._transaction(function(){var e=JSON.parse(c.getItem(l)||"{}");a._once_expired(t,e)&&(e[t]={},e[t].timestamp=(new Date).getTime(),"number"==typeof i&&(e[t].ttl=1e3*i),c.setItem(l,JSON.stringify(e)),n(),window.setTimeout(function(){a._cleanup_once()},50))})}},a.extend(o.prototype,e.prototype),o.bindings=[],o.supported=void 0!==c;var r,s="intercom",l="intercom_once",u="intercom_lock",d=5e4,p=36e5;return o.destroy=function(){c.removeItem(u),c.removeItem(s),c.removeItem(l)},o.getInstance=(r=null,function(){return r||(r=new o),r}),o}();(function(){var e=this,t=e._,r={},a=Array.prototype,n=Object.prototype,i=Function.prototype,o=a.push,s=a.slice,l=a.concat,d=n.toString,c=n.hasOwnProperty,u=a.forEach,p=a.map,f=a.reduce,h=a.reduceRight,g=a.filter,m=a.every,v=a.some,b=a.indexOf,y=a.lastIndexOf,w=Array.isArray,x=Object.keys,S=i.bind,C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.6.0";var E=C.each=C.forEach=function(e,t,n){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,a=e.length;i<a;i++)if(t.call(n,e[i],i,e)===r)return}else{var o=C.keys(e);for(i=0,a=o.length;i<a;i++)if(t.call(n,e[o[i]],o[i],e)===r)return}return e};C.map=C.collect=function(e,i,a){var o=[];return null==e?o:p&&e.map===p?e.map(i,a):(E(e,function(e,t,n){o.push(i.call(a,e,t,n))}),o)};var T="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,i,a,o){var r=2<arguments.length;if(null==e&&(e=[]),f&&e.reduce===f)return o&&(i=C.bind(i,o)),r?e.reduce(i,a):e.reduce(i);if(E(e,function(e,t,n){r?a=i.call(o,a,e,t,n):(a=e,r=!0)}),!r)throw new TypeError(T);return a},C.reduceRight=C.foldr=function(i,a,o,r){var s=2<arguments.length;if(null==i&&(i=[]),h&&i.reduceRight===h)return r&&(a=C.bind(a,r)),s?i.reduceRight(a,o):i.reduceRight(a);var l=i.length;if(l!==+l){var c=C.keys(i);l=c.length}if(E(i,function(e,t,n){t=c?c[--l]:--l,s?o=a.call(r,o,i[t],t,n):(o=i[t],s=!0)}),!s)throw new TypeError(T);return o},C.find=C.detect=function(e,i,a){var o;return I(e,function(e,t,n){if(i.call(a,e,t,n))return o=e,!0}),o},C.filter=C.select=function(e,i,a){var o=[];return null==e?o:g&&e.filter===g?e.filter(i,a):(E(e,function(e,t,n){i.call(a,e,t,n)&&o.push(e)}),o)},C.reject=function(e,i,a){return C.filter(e,function(e,t,n){return!i.call(a,e,t,n)},a)},C.every=C.all=function(e,i,a){i||(i=C.identity);var o=!0;return null==e?o:m&&e.every===m?e.every(i,a):(E(e,function(e,t,n){if(!(o=o&&i.call(a,e,t,n)))return r}),!!o)};var I=C.some=C.any=function(e,i,a){i||(i=C.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(i,a):(E(e,function(e,t,n){if(o||(o=i.call(a,e,t,n)))return r}),!!o)};C.contains=C.include=function(e,t){return null!=e&&(b&&e.indexOf===b?-1!=e.indexOf(t):I(e,function(e){return e===t}))},C.invoke=function(e,t){var n=s.call(arguments,2),i=C.isFunction(t);return C.map(e,function(e){return(i?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,C.property(t))},C.where=function(e,t){return C.filter(e,C.matches(t))},C.findWhere=function(e,t){return C.find(e,C.matches(t))},C.max=function(e,a,o){if(!a&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,s=-1/0;return E(e,function(e,t,n){var i=a?a.call(o,e,t,n):e;s<i&&(r=e,s=i)}),r},C.min=function(e,a,o){if(!a&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,s=1/0;return E(e,function(e,t,n){var i=a?a.call(o,e,t,n):e;i<s&&(r=e,s=i)}),r},C.shuffle=function(e){var t,n=0,i=[];return E(e,function(e){t=C.random(n++),i[n-1]=i[t],i[t]=e}),i},C.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,t))};var O=function(e){return null==e?C.identity:C.isFunction(e)?e:C.property(e)};C.sortBy=function(e,i,a){return i=O(i),C.pluck(C.map(e,function(e,t,n){return{value:e,index:t,criteria:i.call(a,e,t,n)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var k=function(s){return function(i,a,o){var r={};return a=O(a),E(i,function(e,t){var n=a.call(o,e,t,i);s(r,n,e)}),r}};C.groupBy=k(function(e,t,n){C.has(e,t)?e[t].push(n):e[t]=[n]}),C.indexBy=k(function(e,t,n){e[t]=n}),C.countBy=k(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,n,i){for(var a=(n=O(n)).call(i,t),o=0,r=e.length;o<r;){var s=o+r>>>1;n.call(i,e[s])<a?o=s+1:r=s}return o},C.toArray=function(e){return e?C.isArray(e)?s.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:t<0?[]:s.call(e,0,t)},C.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var _=function(e,t,n){return t&&C.every(e,C.isArray)?l.apply(n,e):(E(e,function(e){C.isArray(e)||C.isArguments(e)?t?o.apply(n,e):_(e,t,n):n.push(e)}),n)};C.flatten=function(e,t){return _(e,t,[])},C.without=function(e){return C.difference(e,s.call(arguments,1))},C.partition=function(e,t,n){t=O(t);var i=[],a=[];return E(e,function(e){(t.call(n,e)?i:a).push(e)}),[i,a]},C.uniq=C.unique=function(n,i,e,t){C.isFunction(i)&&(t=e,e=i,i=!1);var a=e?C.map(n,e,t):n,o=[],r=[];return E(a,function(e,t){(i?t&&r[r.length-1]===e:C.contains(r,e))||(r.push(e),o.push(n[t]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var n=s.call(arguments,1);return C.filter(C.uniq(e),function(t){return C.every(n,function(e){return C.contains(e,t)})})},C.difference=function(e){var t=l.apply(a,s.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;n<e;n++)t[n]=C.pluck(arguments,""+n);return t},C.object=function(e,t){if(null==e)return{};for(var n={},i=0,a=e.length;i<a;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var i=0,a=e.length;if(n){if("number"!=typeof n)return e[i=C.sortedIndex(e,t)]===t?i:-1;i=n<0?Math.max(0,a+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;i<a;i++)if(e[i]===t)return i;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(y&&e.lastIndexOf===y)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var a=i?n:e.length;a--;)if(e[a]===t)return a;return-1},C.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=0,o=new Array(i);a<i;)o[a++]=e,e+=n;return o};var A=function(){};C.bind=function(n,i){var a,o;if(S&&n.bind===S)return S.apply(n,s.call(arguments,1));if(!C.isFunction(n))throw new TypeError;return a=s.call(arguments,2),o=function(){if(!(this instanceof o))return n.apply(i,a.concat(s.call(arguments)));A.prototype=n.prototype;var e=new A;A.prototype=null;var t=n.apply(e,a.concat(s.call(arguments)));return Object(t)===t?t:e}},C.partial=function(a){var o=s.call(arguments,1);return function(){for(var e=0,t=o.slice(),n=0,i=t.length;n<i;n++)t[n]===C&&(t[n]=arguments[e++]);for(;e<arguments.length;)t.push(arguments[e++]);return a.apply(this,t)}},C.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return E(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,n){var i={};return n||(n=C.identity),function(){var e=n.apply(this,arguments);return C.has(i,e)?i[e]:i[e]=t.apply(this,arguments)}},C.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(s.call(arguments,1)))},C.throttle=function(n,i,a){var o,r,s,l=null,c=0;a||(a={});var u=function(){c=!1===a.leading?0:C.now(),l=null,s=n.apply(o,r),o=r=null};return function(){var e=C.now();c||!1!==a.leading||(c=e);var t=i-(e-c);return o=this,r=arguments,t<=0?(clearTimeout(l),l=null,c=e,s=n.apply(o,r),o=r=null):l||!1===a.trailing||(l=setTimeout(u,t)),s}},C.debounce=function(t,n,i){var a,o,r,s,l,c=function(){var e=C.now()-s;e<n?a=setTimeout(c,n-e):(a=null,i||(l=t.apply(r,o),r=o=null))};return function(){r=this,o=arguments,s=C.now();var e=i&&!a;return a||(a=setTimeout(c,n)),e&&(l=t.apply(r,o),r=o=null),l}},C.once=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}},C.wrap=function(e,t){return C.partial(t,e)},C.compose=function(){var n=arguments;return function(){for(var e=arguments,t=n.length-1;0<=t;t--)e=[n[t].apply(this,e)];return e[0]}},C.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},C.keys=function(e){if(!C.isObject(e))return[];if(x)return x(e);var t=[];for(var n in e)C.has(e,n)&&t.push(n);return t},C.values=function(e){for(var t=C.keys(e),n=t.length,i=new Array(n),a=0;a<n;a++)i[a]=e[t[a]];return i},C.pairs=function(e){for(var t=C.keys(e),n=t.length,i=new Array(n),a=0;a<n;a++)i[a]=[t[a],e[t[a]]];return i},C.invert=function(e){for(var t={},n=C.keys(e),i=0,a=n.length;i<a;i++)t[e[n[i]]]=n[i];return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(n){return E(s.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n},C.pick=function(t){var n={},e=l.apply(a,s.call(arguments,1));return E(e,function(e){e in t&&(n[e]=t[e])}),n},C.omit=function(e){var t={},n=l.apply(a,s.call(arguments,1));for(var i in e)C.contains(n,i)||(t[i]=e[i]);return t},C.defaults=function(n){return E(s.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var M=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var a=d.call(e);if(a!=d.call(t))return!1;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var r=e.constructor,s=t.constructor;if(r!==s&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,c=!0;if("[object Array]"==a){if(c=(l=e.length)==t.length)for(;l--&&(c=M(e[l],t[l],n,i)););}else{for(var u in e)if(C.has(e,u)&&(l++,!(c=C.has(t,u)&&M(e[u],t[u],n,i))))break;if(c){for(u in t)if(C.has(t,u)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};C.isEqual=function(e,t){return M(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=w||function(e){return"[object Array]"==d.call(e)},C.isObject=function(e){return e===Object(e)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return d.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==d.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return c.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.property=function(t){return function(e){return e[t]}},C.matches=function(n){return function(e){if(e===n)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0}},C.times=function(e,t,n){for(var i=Array(Math.max(0,e)),a=0;a<e;a++)i[a]=t.call(n,a);return i},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};j.unescape=C.invert(j.escape);var D={escape:new RegExp("["+C.keys(j.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(j.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(D[t],function(e){return j[t][e]})}}),C.result=function(e,t){if(null!=e){var n=e[t];return C.isFunction(n)?n.call(e):n}},C.mixin=function(n){E(C.functions(n),function(e){var t=C[e]=n[e];C.prototype[e]=function(){var e=[this._wrapped];return o.apply(e,arguments),H.call(this,t.apply(C,e))}})};var L=0;C.uniqueId=function(e){var t=++L+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(o,e,t){var n;t=C.defaults({},t,C.templateSettings);var i=new RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),r=0,s="__p+='";o.replace(i,function(e,t,n,i,a){return s+=o.slice(r,a).replace(P,function(e){return"\\"+N[e]}),t&&(s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),r=a+e.length,e}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(e)return n(e,C);var a=function(e){return n.call(this,e,C)};return a.source="function("+(t.variable||"obj")+"){\n"+s+"}",a},C.chain=function(e){return C(e).chain()};var H=function(e){return this._chain?C(e).chain():e};C.mixin(C),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=a[t];C.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],H.call(this,e)}}),E(["concat","join","slice"],function(e){var t=a[e];C.prototype[e]=function(){return H.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}).call(this),LiveHelpSettings._=_.noConflict(),LiveHelpSettings.cookies=Cookies.noConflict(),function(E,T,I,t,a,O,k){"use strict";var p,o,l,c,u,d,e="https:"===T.location.protocol?"https://":"http://",_="/livehelp/",f="/livehelp/",h={home:"index.php",settings:"include/settings.php",visitor:"include/visitor.php",offline:"offline.php",security:"security.php",image:"image.php",chat:"chat.php",call:"call.php",signout:"logout.php",messages:"messages.php",send:"send.php",email:"email.php"},n=void 0!==t?t.server:T.location.host+T.location.pathname.substring(0,T.location.pathname.indexOf(_)),A="#"+I,M={protocol:e,server:e+n+_,domain:T.location.host.replace("www.",""),department:"",template:"default",sprite:!0,locale:"en",embedded:!1,initiate:!0,initiateDelay:0,css:!0,fonts:!0,session:"",security:"",popup:!1,visitorTracking:null,plugin:"",name:"",custom:"",email:"",connected:!1,hideOffline:!0,chatBubbles:!1,messageBubbles:!0,personalised:!1,offline:!1,accepted:!1,promptPrechatDelay:250,theme:"green"},r=0,s=0,i=0,g="",j="",m={left:0,top:0},v="",b="",y=!1,w=0,x=15e3,S=O.now(),C={name:t.account!==k&&36===t.account.length?"LiveHelp-"+t.account:I+"Session"},D={session:LiveHelpSettings.cookies.get(C.name)},L={user:"Guest",departments:[],visitorTracking:!0,locale:"en",language:{copyright:"Copyright &copy; "+(new Date).getFullYear(),online:"Online",offline:"Offline",brb:"Be Right Back",away:"Away",contactus:"Contact Us"}},B={tabOpen:!1,operatorDetailsOpen:!0,soundEnabled:!0,notificationEnabled:!0,chatEnded:!1,department:"",messages:0,lastMessage:0},N="",P={},H=!1,R=[],$=!0,z=!1;function W(){void 0!==t&&(M=O.extend(M,t)),M.account!==k&&36===M.account.length&&O.each(h,function(e,t){t.indexOf(M.account)<0&&(-1<t.indexOf("api/")?h[e]=t.replace("api/","api/"+M.account+"/"):h[e]=M.account+"/"+t)}),-1===M.server.indexOf("http://")&&-1===M.server.indexOf("https://")?M.server=M.protocol+M.server:M.server=M.protocol+n}Date.now||(Date.now=function(){return(new Date).getTime()}),O(T).on("click","."+I+"Button",function(){return et(O(this)),!1}),O(T).on("click","."+I+"CallButton",function(){return et(O(this),"",h.call),!1}),O(T).on("click","."+I+"OfflineButton",function(){return Ye(),!1}),O.preloadImages=function(){for(var e=0;e<arguments.length;e++)O("<img>").attr("src",arguments[e])},W();var F=Intercom.getInstance(),U={origin:F.origin,timer:!1,master:!0,time:(new Date).getTime()},V=a.sortedIndex(R,U,"time");function J(e){F.emit("close",{origin:F.origin,master:$}),M.visitorTracking=!1}function G(e){var t=a.findWhere(R,{origin:e.origin});if(t===k){var n={origin:e.origin,timer:!1,master:e.master,time:e.time},i=a.sortedIndex(R,n,"time");R.splice(i,0,n)}else!1!==t.timer&&(E.clearTimeout(t.timer),t.timer=!1),t.master=e.master,t.time=e.time}null!=E&&(E.addEventListener?E.addEventListener("beforeunload",J):E.attachEvent&&E.attachEvent("onbeforeunload",J)),F.on("ready",function(e){if(e.origin!==F.origin){M.visitorTracking=!1,$=!1;var t=a.findWhere(R,{origin:e.origin});if(t===k){a.each(R,function(e,t,n){e.master=!1});var n={origin:e.origin,timer:!1,master:!0,time:e.time},i=a.sortedIndex(R,n,"time");R.splice(i,0,n)}else!1!==t.timer&&(E.clearTimeout(t.timer),t.timer=!1),t.master=!0}}),F.on("ping",function(e){e.origin!==F.origin&&(G(e),F.emit("pong",{origin:F.origin,master:$,time:U.time}))}),F.on("pong",function(e){e.origin!==F.origin&&G(e)}),F.on("master",function(e){if(e.origin===F.origin){var t=a.findWhere(R,{origin:e.origin});t!==k&&(t.master=!0),M.visitorTracking=!0,$=!0}}),F.on("close",function(t){if(t.origin!==F.origin&&0<(R=a.reject(R,function(e){return e.origin===t.origin})).length&&t.master){var e=a.where(R,{master:!1}),n=e[e.length-1];n!==k&&F.emit("master",{origin:n.origin})}});var Z=a.throttle(function(){$&&F.emit("ping",{origin:F.origin,master:$}),O.each(R,function(e,t){var n=a.findWhere(R,{origin:t.origin});!1===n.timer&&t.origin!==F.origin&&(n.timer=E.setTimeout(function(){R=a.reject(R,function(e){return e.origin===t.origin}),n.timer=!1},15e3))})},7500);R.splice(V,0,U),F.emit("ready",U),function e(){$&&Z();var t=R[R.length-1];U.time<t.time&&!0===$&&(M.visitorTracking=!1,$=!1),1!==R.length||t.origin!==U.origin||$||(M.visitorTracking=!0,$=!0),E.setTimeout(e,7500)}();var q=a.once(function(e){LiveHelpSettings.cookies.set(C.name,e,{domain:M.domain})});function X(r){var e={JSON:""};D.session!==k&&0<D.session.length&&(e.SESSION=D.session),t!==k&&t.locale!==k&&(e.LANGUAGE=t.locale),t!==k&&t.template!==k&&(e.TEMPLATE=t.template),M.department!==k&&0<M.department.length&&(e.DEPARTMENT=M.department),O.ajax({url:M.server+f+h.settings,data:O.param(e),success:function(e,t,n){if(e.error&&!1!==M.embedded){e.embedded&&(L.embedded=e.embedded),ft(!0);var i=O(A+"Embedded");i.addClass("signup-collapsed"),Te("Offline"),initSetup&&initSetup(i,e)}else{L=e;var a=!1;if(M.popup&&0<M.session.length?a=M.session:0<L.session.length&&(a=L.session),q(a),M.language===k||O.isEmptyObject(M.language)||(L.language=O.extend(L.language,M.language)),M.visitorTracking=(null==M.visitorTracking||!1!==M.visitorTracking)&&L.visitorTracking,P.websockets===k&&Be(),M.sprite="default"===M.template&&!1===M.sprite||M.sprite,""!==L.offlineRedirect&&(/^(?:^[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+@[\-!#$%&'*+\\\/0-9=?A-Z\^_`a-z{|}~]+\.[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+$)$/i.test(L.offlineRedirect)&&(L.offlineRedirect="mailto:"+L.offlineRedirect),L.offlineEmail=0),M.personalised){var o=L.embeddedinitiate;0<o.id&&ae(o.id,o.name,o.department,o.avatar)}M.introduction||(M.introduction=L.introduction),L.initiate&&!L.autoload&&De(),O(T).trigger(I+".SettingsUpdated",L),L.smilies?O(A+"SmiliesButton").show():O(A+"SmiliesButton").hide(),m.left=(E.screen.width-L.popupSize.width)/2,m.top=(E.screen.height-L.popupSize.height)/2,v="height="+L.popupSize.height+",width="+L.popupSize.width+",top="+m.top+",left="+m.left+",resizable=1,toolbar=0,menubar=0",K(L.departments),r&&r(),0<L.user.length&&O(A+"NameInput").val(L.user),!1!==L.email&&0<L.email.length&&O(A+"EmailInput").val(L.email),0<L.department.length&&O(A+"DepartmentInput").val(L.department)}},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}function K(n){var i="DepartmentInput",a="",o=O(A+i);if(n===k&&L.departments!==k&&(n=L.departments),0<n.length){var e=o.find("option");O.each(e,function(e,t){0<(t=O(this).val()).length&&O.inArray(t,n)<0&&O(A+i+' option[value="'+t+'"]').remove()});var r=0;O.each(n,function(e,t){(M.departments===k||M.departments!==k&&0<M.departments.length&&-1<O.inArray(t,M.departments))&&(o.find('option[value="'+t+'"]').length||(a+='<option value="'+t+'">'+t+"</option>"),r+=1)}),0<r?(0<a.length&&(o.find('option[value=""]').length||(a='<option value=""></option>'+a),o.append(a)),0===M.department.length&&O(A+"DepartmentLabel").show()):O(A+"DepartmentLabel").hide()}else O(A+"DepartmentLabel").hide()}function Q(){O.jStorage.set(I,B)}function Y(){0<s&&(s=0),Q(),O(A+"Notification").fadeOut(250)}function ee(e,t){L.blocked!==k&&0!==L.blocked&&lt();var n=O(A+"Embedded");if(n.is(".closed")&&!0===M.embedded){if(!0===M.sprite&&O("<img />").load(function(){O('<link href="'+M.server+_+"templates/"+M.template+'/styles/sprite.min.css" rel="stylesheet" type="text/css"/>').appendTo("head")}).attr("src",M.server+_+"images/Sprite.png"),p===k&&(p=new buzz.sound(M.server+_+"sounds/Pending Chat",{formats:["ogg","mp3","wav"],volume:100})),s=0,Y(),ut(),0!==L.loginDetails||t)n.removeClass("closed").addClass("opened"),O("."+I+"MobileButton").addClass("show"),O("body").addClass(I+"Opened"),B.tabOpen=!0,Q();else{if(!L.initiate)return void Me();je()}O(A+"CloseButton").removeClass("expand").addClass("collapse"),e&&e()}}function te(e){var t=O(A+"Embedded");t.height();t.is(".signup")||(O(A+"SmiliesButton").close(),t.is(".opened")&&(Se(),t.css("bottom","-415").removeClass("opened").addClass("closed"),O("body").removeClass(I+"Opened"),B.tabOpen=!1,Q()),"Online"===L.status&&(M.connected||L.initiate||O("."+I+"Icon").fadeIn()),e&&e.call(),O("."+I+"MobileButton").addClass("show"),O(A+"CloseButton").removeClass("collapse").addClass("expand"),t.attr("data-opened")&&_e("Declined"))}function ne(){var e=O(A+"Body");if(86===parseInt(e.css("top"),10)){var t=O(A+"Scroll").height();e.animate({top:36},500,"swing",function(){O(A+"CollapseButton").removeClass("Collapse").addClass("Expand").attr("title",L.language.expand)}),O(A+"Scroll").animate({height:t+50},500)}}var ie=a.once(function(){if(0<"".length){O('<style type="text/css"></style>').appendTo(T.head)}});function ae(e,t,n,i){if(n!==k&&0<n.length){var a=n.split(";");O.each(a,function(e,t){O.trim(t)!==O.trim(M.department)||(n=O.trim(t))})}var o=O(A+"Scroll"),r=n!==k?n:B.department;if(e!==k&&t!==k){var s=M.server+f+h.image,l=s+"?"+O.param({id:e,size:50,round:""});if(M.connected&&(O(A+"Toolbar").show(),O(A+"Typing span, "+A+"TypingPopup span").text(t+" "+L.language.istyping)),M.account!==k&&(l=s+"/round/",l+=0<e?e+"/50px/":"default/50px/"),0<i.length)l="https://secure.gravatar.com/avatar/"+i+"?s=50&r=g&d="+l;M.chatBubbles?(O("."+I+"Operator").show(),O(A+"StatusText").css("left","70px"),ie(),O("."+I+"Icon").hide(),O("."+I+"Operator .OperatorImage").css("background",'url("'+l+'") no-repeat'),O(A+"CollapseButton").hide(),M.colors!==k&&!1!==M.chatBubbles&&M.colors.image!==k&&M.colors.image.border!==k&&O(A+"Embedded").css("border",M.colors.image.border)):(O(A+"OperatorImage").css("background",'url("'+l+'") no-repeat'),O(A+"OperatorName").text(t),O(A+"OperatorDepartment").text(r))}if(B.operatorDetailsOpen&&0<O(A+"OperatorName").text().length&&36===parseInt(O(A+"Body").css("top"),10)){var c=o.height();O(A+"Body").animate({top:86},500,"swing",function(){O(A+"CollapseButton").removeClass("Expand").addClass("Collapse").attr("title",L.language.collapse)}),o.animate({height:c-50},500)}}function oe(){var e=O(A+"Scroll"),t=O(A+"Body");86===parseInt(t.css("top"),10)&&e.get(0).scrollHeight>e.height()&&O(A+"CollapseButton").click()}function re(){var e=B.soundEnabled?"SoundOn":"SoundOff",t=O(A+"SoundToolbarButton");0<t.length&&t.removeClass("SoundOn SoundOff").addClass(e)}var se=a.once(function(){O(A+"Embedded").is(".signup")?ee(!1,!1):B===k||B.tabOpen===k||!0!==B.tabOpen||"Online"!==L.status&&0===L.autoload?te():ee(!1,!1)});function le(){var e=O.jStorage.get(I),t=O(A+"Embedded"),n=O(A+"InitiateChatBubble").is(":visible");null!==e?(B=e,0<t.length&&!n&&L.autoload&&se(),B.soundEnabled!==k?re():B.soundEnabled=!0,L.autoload||(B.operatorDetailsOpen!==k&&B.operatorDetailsOpen?ae():ne())):0<t.length&&se()}function ce(){var e=O(A+"Scroll");e&&e.scrollTo(O(A+"MessagesEnd"))}var ue=function(s){return function(e){var t,n="",i=O(A+"Messages").width()-50,a=[25,25,25,25];if(this.width>i){var o=i/this.width,r=this.height*o;n='<div class="'+I+'Image" style="position:relative; max-width:'+this.width+"px; max-height:"+this.height+"px; height:"+r+'px; margin:5px"><div class="'+I+'ImageZoom" style="position:absolute; opacity:0.5; top:0px; z-index:150; background:url('+M.server+_+"images/Magnify.png) center center no-repeat; max-width:"+this.width+"px; max-height:"+this.height+"px; width:"+i+"px; height:"+r+'px"></div><div class="'+I+'ImageHover" style="position:absolute; top:0px; z-index:100; background:#fff; opacity:0.25; max-width:'+this.width+"px; max-height:"+this.height+"px; width:"+i+"px; height:"+r+'px"></div><div style="position:absolute; top:0px;"><a href="'+this.src+'" class="fancybox"><img src="'+this.src+'" alt="Received Image" style="width:'+i+"px; max-width:"+this.width+"px; max-height:"+this.height+'px"></a></div>'}else n='<img src="'+this.src+'" alt="Received Image" style="max-width:'+this.width+'px; margin:5px">';O(".message[data-id="+s+"]").append(n),n="",ce(),M.popup||(a=[25,405,25,25]),O(".message[data-id="+s+"] .fancybox").fancybox({openEffect:"elastic",openEasing:"swing",closeEffect:"elastic",closeEasing:"swing",margin:a}),O("."+I+"ImageZoom").hover(function(){O("."+I+"ImageHover").fadeTo(250,0),O(this).fadeTo(250,1)},function(){O("."+I+"ImageHover").fadeTo(250,.25),O(this).fadeTo(250,.75)}),O(".message[data-id="+s+"] ."+I+"ImageZoom").click((t=s,function(e){O(".message[data-id="+t+"] .fancybox").click()})),p!==k&&B.soundEnabled&&B.notificationEnabled&&p.play(),E.focus()}};function de(e){if(L.smilies)for(var t=[{regex:/^:D$|^:D | :D | :D$/g,css:"Laugh"},{regex:/^:\)$|^:\) | :\) | :\)$/g,css:"Smile"},{regex:/^:\($|^:\( | :\( | :\($/g,css:"Sad"},{regex:/^\$\)$|^\$\) | \$\) | \$\)$/g,css:"Money"},{regex:/^&gt;:O$|^&gt;:O |^>:O | &gt;:O | >:O | &gt;:O$| >:O$/g,css:"Angry"},{regex:/^:P$|^:P | :P | :P$/g,css:"Impish"},{regex:/^:\\$|^:\\ | :\\ | :\\$/g,css:"Sweat"},{regex:/^8\)$|^8\) | 8\) | 8\)$/g,css:"Cool"},{regex:/^&gt;:L$|^&gt;:L |^>:L | &gt;:L | >:L | &gt;:L$| >:L$/g,css:"Frown"},{regex:/^;\)$|^;\) | ;\) | ;\)$/g,css:"Wink"},{regex:/^:O$|^:O | :O | :O$/g,css:"Surprise"},{regex:/^8-\)$|^8-\) | 8-\) | 8-\)$/g,css:"Woo"},{regex:/^8-O$|^8-O | 8-O | 8-O$/g,css:"Shock"},{regex:/^xD$|^xD | xD | xD$/g,css:"Hysterical"},{regex:/^:-\*$|^:-\* | :-\* | :-\*$/g,css:"Kissed"},{regex:/^:S$|^:S | :S | :S$/g,css:"Dizzy"},{regex:/^\+O\)$|^\+O\) | \+O\) | \+O\)$/g,css:"Celebrate"},{regex:/^&lt;3$|^<3$|^&lt;3|^<3 | &lt;3|<3 | &lt;3$| <3$/g,css:"Adore"},{regex:/^zzZ$|^zzZ | zzZ | zzZ$/g,css:"Sleep"},{regex:/^:X$|^:X | :X | :X$/g,css:"Stop"},{regex:/^X-\($|^X-\( | X-\( | X-\($/g,css:"Tired"}],n=0;n<t.length;n++){var i=t[n];e=e.replace(i.regex,' <span title="'+i.css+'" class="sprite '+i.css+' Small Smilie"></span> ')}return O.trim(e)}function pe(e,t,n,i,a,o){var r,s,l="",c=O(A+"Messages"),u=!1;if(!isNaN(parseInt(e,10))&&0<O(".message[data-id="+e+"]").length?u=!0:O(T).trigger(I+".MessageRead",{message:e}),c&&null!==i&&!B.chatEnded&&!u){var d="left",p="#000",f="";-2===e&&(O(A+"Waiting, "+A+"Connecting").fadeOut(250),B.operatorDetailsOpen!==k&&B.operatorDetailsOpen&&O(A+"CollapseButton").click(),st!==k&&0<st.length&&0!==L.loginDetails&&(rt(st[0]),st=[])),2===a?d="center":3===a&&(d="right"),0===o&&(p="#666"),!O(A+"Toolbar").is(":hidden")||B.chatEnded||M.chatBubbles||O(A+"Toolbar, "+A+"CollapseButton").fadeIn(250),!0===L.rtl&&(f="; text-align: right"),t===k&&(t=e);var h="message",g=15;if(M.messageBubbles&&0<e&&(h="message bubble ",g=0,p="#000",h+=1===o||2===o||7===o?"left":"right"),l+='<div class="'+h+'" data-id="'+e+'" data-datetime="'+t+'" style="color:'+p+f+'">',0===o||1===o||2===o||7===o){n!==k&&"string"==typeof n&&0<n.length&&(M.messageBubbles||(l+=n+" "+L.language.says+":<br/>"),0<o&&(j=n)),"left"===d&&!0===L.rtl&&(d="right"),i=i.replace(/([a-z0-9][a-z0-9_\.\-]{0,}[a-z0-9]@[a-z0-9][a-z0-9_\.\-]{0,}[a-z0-9][\.][a-z0-9]{2,4})/g,'<span style="margin-top:5px"><a href="mailto:$1" class="message-email">$1</a></span>');var m=/^.*((youtu.be\/)|(v\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/i.exec(i),v=c.width();if(null!==m&&6<m.length){var b=m[6];if(d="left",2===o){var y={width:260,height:195},w="message-video fancybox.iframe",x="embed/",S="self";M.popup&&(y={width:480,height:360},w="message-video-popup",x="watch?v=",S="blank"),i='<a href="http://www.youtube.com/'+x+b+'" target="_'+S+'" class="'+w+'"><div style="position:relative; height:'+y.height+"px; margin:5px; color: "+p+'"><div class="'+I+'VideoZoom noresize" style="position:absolute; opacity:0.5; top:0px; z-index:150; background:url('+M.server+_+"images/Play.png) center center no-repeat; max-width:"+y.width+"px; width:"+y.width+"px; height:"+y.height+'px"></div><div class="'+I+'VideoHover noresize" style="position:absolute; top:0px; z-index:100; background:#fff; opacity:0.25; max-width:'+y.width+"px; width:"+y.width+"px; height:"+y.height+'px"></div><div style="position:absolute; top:0px;"><img src="http://img.youtube.com/vi/'+b+'/0.jpg" alt="YouTube Video" class="noresize" style="width:'+y.width+"px; max-width:"+v+'px"></div></div></a>'}else i='<div style="text-align: '+d+"; margin-left: "+g+"px; color: "+p+'">'+(i=de(i=i.replace(/((?:(?:http(?:s?))|(?:ftp)):\/\/[^\s|<|>|'|\"]*)/g,'<a href="$1" target="_blank" class="message-link fancybox.iframe">$1</a>')))+"</div>";l+=i}else l+='<div style="text-align: '+d+"; margin-left: "+g+"px; color: "+p+'">'+(i=de(i=i.replace(/((?:(?:http(?:s?))|(?:ftp)):\/\/[^\s|<|>|'|\"]*)/g,'<a href="$1" target="_blank" class="message-link">$1</a>')))+"</div>"}else if(3===o){var C=(i=i.replace(/((?:(?:http(?:s?))):\/\/[^\s|<|>|'|\"]*)/g,'<img src="$1" alt="Received Image">')).match(/((?:(?:http(?:s?))):\/\/[^\s|<|>|'|"]*)/g);null!==C?(""!==n&&(l+=n+" "+L.language.says+":<br/>"),O("<img />").load(ue(e)).attr("src",C)):l+=i}else 4===o?(r=i,(s=E.opener)&&(s.location.href=r,s.focus()),l+='<div style="margin-top:5px">'+L.language.pushedurl+', <a href="'+i+'" target="_blank" class="message">'+i+"</a> "+L.language.opennewwindow+"</div>"):5===o?new Function(i)():6===o&&(l+=L.language.sentfile+' <a href="'+i+'" target="'+I+'FileDownload">'+L.language.startdownloading+"</a> "+L.language.rightclicksave);l+="</div>",O(A+"Waiting, "+A+"Connecting").fadeOut(250)}return l}function fe(){E.clearInterval(o),o=null,0<g.length&&O(T).attr("title",g)}function he(e){var t=e.typing!==k&&e.typing,n=O(A+"Typing, "+A+"TypingPopup");t?n.show():n.hide()}var ge=!1;function me(e){var t,i="",a=!1,n=[25,25,25,25];O.each(e,function(e,t){var n=t.username;t.firstname!==k&&0<t.firstname.length&&(n=t.firstname),i+=pe(t.id,t.datetime,n,t.content,t.align,t.status),a=t.id,0<t.status&&s++}),0<i.length&&(B.chatEnded||M.chatBubbles||O(A+"CollapseButton").fadeIn(250),O(A+"Messages").append(i),0!==L.loginDetails&&O(A+"Messages .InitiateChat").hide(),O(A+"Messages .message:not(.link), "+A+"Messages "+A+"Continue").sort(function(e,t){return(e=parseInt(O(e).data("datetime"),10))<(t=parseInt(O(t).data("datetime"),10))?-1:t<e?1:0}).appendTo(A+"Messages"),oe(),M.popup||(n=[25,405,25,25]),O(".message-link, .message-video").fancybox({openEffect:"elastic",openEasing:"swing",closeEffect:"elastic",closeEasing:"swing",margin:n}),O("."+I+"VideoZoom").hover(function(){O("."+I+"VideoHover").fadeTo(250,0),O(this).fadeTo(250,1)},function(){O("."+I+"VideoHover").fadeTo(250,.25),O(this).fadeTo(250,.75)}),ce(),!E.isActive&&0<r&&(t=!1,null===o&&(o=E.setInterval(function(){var e=t?g:j+" messaged you";O(T).attr("title",e),t=!t},2e3))),a>B.lastMessage&&(!B.chatEnded&&O(A+"Embedded").is(".closed")?0<s&&function(){if(B.notificationEnabled){if(0<s){var e=99<s?"...":s;O(A+"Notification span").text(e)}p!==k&&B.soundEnabled&&B.notificationEnabled&&p.play()}}():(s=0,p!==k&&!B.chatEnded&&B.soundEnabled&&(M.popup||B.notificationEnabled)&&p.play()))),!1!==a&&(0<a&&(r=a),a>B.lastMessage&&(B.lastMessage=a,Q()))}function ve(){if(B.chatEnded)E.setTimeout(ve,1500);else if(M.connected&&L.language!==k){var e={TIME:O.now(),LANGUAGE:L.locale,MESSAGE:r};1===i&&(e.TYPING=i),D.session!==k&&0<D.session.length&&(e=O.extend(e,{SESSION:D.session}),!1===ge&&O(T).trigger(I+".UpdatingMessages",L)),O.jsonp({url:M.server+f+h.messages+"?callback=?",data:O.param(e),success:function(e){ge=!0,null!==e&&""!==e?(e.messages!==k&&0<e.messages.length&&me(e.messages),he(e)):he(!1),!1===H&&E.setTimeout(ve,1500)},error:function(){!1===H&&E.setTimeout(ve,1500)}}),gt&&gt()}else!1===ge&&!1===H&&E.setTimeout(ve,1500)}function be(){var e=O(A+"Embedded");O(A+"SignIn").hide(),O(A+"SignedIn").show(),O(A+"Messages .message[data-id=-2]").length||O(A+"Waiting").show(),O(A+"Body, "+A+"Background").css("background-color","#fff"),O(A+"Input").animate({bottom:0},500),e.is(":hidden")&&(O(A+"Waiting, "+A+"Connecting").hide(),e.fadeIn(50,function(){M.connected||L.initiate||O("."+I+"Icon").fadeIn()}),le())}function ye(){B.chatEnded||O(A+"SignIn").is(":visible")&&(tt(),!0===M.sprite?O("<img />").load(function(){O('<link href="'+M.server+_+"templates/"+M.template+'/styles/sprite.min.css" rel="stylesheet" type="text/css"/>').appendTo("head"),be()}).attr("src",M.server+_+"images/Sprite.png"):be())}function we(){var e="Rating",t="#"+I+e;if(0===O(t).length){var n='<div id="'+I+"Feedback"+e+'">'+L.language.rateyourexperience+':<br/> \t\t<div id="'+I+e+'"> \t\t\t<div class="'+e+' VeryPoor" title="Very Poor"></div> \t\t\t<div class="'+e+' Poor" title="Poor"></div> \t\t\t<div class="'+e+' Good" title="Good"></div> \t\t\t<div class="'+e+' VeryGood" title="Very Good"></div> \t\t\t<div class="'+e+' Excellent" title="Excellent"></div> \t\t</div> \t</div>';O(A+"MessagesEnd").prepend(n);var i=O(t);i.find("."+e).hover(function(){var e=O(this).index();i.find(":lt("+e+"1)").css("background-position","0 -32px").parent().find(":gt("+e+")").css("background-position","0 0")},function(){var e=O(this).index()+1;i.find(":lt("+e+")").css("background-position","0 0"),i.find("div").each(function(){O.data(this,"selected")&&O(this).css("background-position","0 -16px")})}).click(function(){var e=O(this).index(),t={RATING:e+1};D.session!==k&&0<D.session.length&&(t=O.extend(t,{SESSION:D.session})),i.find(":lt("+e+"1)").data("selected",!0).css("background-position","0 -16px"),i.find(":gt("+e+")").data("selected",!1).css("background-position","0 0"),O.ajax({url:M.server+f+h.signout,data:O.param(t),dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}),ce()}else{var a=O(A+"FeedbackRating");a.is(":visible")?a.hide():(a.show(),O(A+"Scroll").scrollTo(a))}}function xe(){O("."+I+"Status").each(function(){var e=L.status;"BRB"===e&&(e="Be Right Back"),O(this).attr("title","Live Chat - "+e).attr("alt","Live Chat - "+e)})}function Se(){var e=O(A+"Embedded"),t=O(A+"StatusText"),n=O(A+"CloseButton"),i=O(A+"Tab"),a=t.position().left+t.width()+n.width()+30;0<t.width()&&(i.css("width",a+2+"px"),e.css("width",a+"px"))}function Ce(e,t){var n=O("."+I+"StatusIndicator");if(t===k&&(t=O(A+"Embedded")),e=Ee(e),t.find(A+"StatusText").text(e),t.is(".closed")&&Se(),e===L.language.online&&M.personalised){var i=L.embeddedinitiate;if(0<i.id)return void ae(i.id,i.name,i.department,i.avatar)}else e!==L.language.offline&&e!==L.language.contactus||n.hide()}function Ee(e){switch(e){case"Offline":return L.language.contactus;case"Online":return L.language.online;case"BRB":return L.language.brb;case"Away":return L.language.away}}function Te(e){var t=O(A+"Embedded");Ce(e,t),0!==L.loginDetails&&t.find("."+I+"Operator .OperatorImage").hide(),t.find("."+I+"Icon").addClass("offline").fadeIn(),t.find(".CloseButton").fadeOut(250),t.fadeIn(50).css("z-index","5000"),te()}ve();var Ie=!1;function Oe(i,e){var t=O(A+"Embedded"),n=O("."+I+"Invite"),a=O(A+"InitiateChatBubble"),o=a.is(":visible");function r(){n.show(),!0===M.embedded&&0<t.length&&(M.connected||Ce("Online",t),t.find("."+I+"Icon").removeClass("offline"),t.find(".CloseButton").fadeIn(250),o||t.fadeIn(50,function(){0!==L.autoload&&(ye(),M.connected=!0),M.connected||L.initiate||O("."+I+"Icon").fadeIn()}))}K(e),(M.offline||!1!==e&&M.embedded&&!O(A+"DepartmentInput option").length||!1!==e&&0<L.departments.length&&0<M.department.length&&O.inArray(M.department,L.departments)<0)&&(i="Offline"),O(".LiveHelpTextStatus").each(function(e,t){var n=Ee(i);O(this).text(n).attr("title",n)}),O(".LiveHelpButton").each(function(e,t){var n=Ee(i);O(this).attr("title",n)}),"Online"===i?Ie||e!==k||""===L.status||L.status===i?r():(X(function(e,t,n){r()}),Ie=!0):(Ie=!1,0!==L.autoload&&n.hide(),a.css("bottom",-a.outerHeight()).hide(),0<t.length&&(M.connected?r():!0===M.hideOffline&&t.fadeOut(50).css("z-index","10000000")),"Online"!==i&&!0!==M.hideOffline&&!1===M.connected&&L.offlineEmail&&Te(i),"Online"!==i&&O(A+"InitiateChat").is(":visible")&&O(A+"InitiateChat").fadeOut()),""!==L.status&&L.status!==i&&(O(T).trigger(I+".StatusModeChanged",[i]),L.status=i,O("."+I+"Status").each(function(){var e=L.images[i.toLowerCase()];e!==k?O(this).attr("src",e):O(this).attr("src",L.images.offline),xe()}))}function ke(){var e=new Date;return e?e.getTimezoneOffset():""}function _e(e){b!==e&&(b=e,0<w&&(y=!1,"Accepted"!==e&&"Declined"!==e||O(A+"InitiateChat").fadeOut(250),Be(!0)))}function Ae(){if(O(A+"Embedded").length){if(O(A+"SignIn").hide(),O(A+"SignedIn").show(),O(A+"Body, "+A+"Background").css("background-color","#fff"),O(A+"Input").animate({bottom:0},500),0===O(A+"Scroll .InitiateChat").length){var e='<div class="InitiateChat"> \t<div class="'+(M.messageBubbles?"message bubble left":"message")+'" data-id="-1"> \t\t<div style="color: #000">'+M.introduction+"</div> \t</div>";O(e).appendTo(A+"Messages")}O(A+"Waiting").hide(),B.operatorDetailsOpen=!0;var t=L.embeddedinitiate;0<t.id&&ae(t.id,t.name,t.department,t.avatar)}}function Me(){var e=O(A+"Embedded"),t=e.find(A+"MessageTextarea");Ae(),e.removeClass("opened").addClass("closed").css("bottom",""),O("body").removeClass(I+"Opened"),ee(function(){setTimeout(function(){t.focus()},500)},!0),_e("Opened"),O.data(e,"initiate",!0),e.attr("data-opened",!0)}function je(){if(Ae(),0===O(A+"InitiateChatBubble").length){var e=L.embeddedinitiate,t="";0<e.id&&(t="https://secure.gravatar.com/avatar/"+e.avatar+"?s=50&r=g&d="+M.server+f+h.image+"?override=true&size=50&round=true");var n='<div id="'+I+'InitiateChatBubble"> <div class="message bubble right"><div>'+M.introduction+'</div></div> <div class="operator photo" style="background-image: url(\''+t+'\')"></div> <div class="operator badge">1</div> </div>',i=O(n).appendTo("body");O(T).trigger(I+".InitiateChatLoaded"),O("<img />").load(function(){i.on("click",function(){M.embedded?O(this).fadeOut(150,function(){Me()}):(O(this).fadeOut(150),et(),_e("Opened"))}),i.css("height",O(A+"InitiateChatBubble .bubble").outerHeight()+25+"px"),i.animate({bottom:0})}).attr("src",t),O(A+"Embedded").removeClass("opened").addClass("closed").css("bottom","-450px"),O("body").removeClass(I+"Opened")}}function De(){function e(){if(M.initiate&&L.status!==k&&"Online"===L.status){var e=!1;L.embeddedinitiate!==k&&null!=L.embeddedinitiate&&(e=O(A+"Embedded"),M.visitorTracking&&!O.data(e,"initiate")&&""===b&&je())}}0<M.initiateDelay?setTimeout(e,M.initiateDelay):e()}var Le=a.once(function(e){LiveHelpSettings.cookies.set(C.name,e,{domain:M.domain})});function Be(e){if(clearTimeout(c),y=0<w&&e===k&&(!1===H&&!1===$||P.websockets!==k&&!0===H),M.visitorTracking&&!y){var t,n=O(T).attr("title").substring(0,150),i=(ke(),T.location.protocol+"//"+T.location.host),a=M.server+f+h.visitor+"?callback=?",o={INITIATE:b};if(t=T.referrer.substring(0,i.length)===i.location?"":T.referrer,M.department!==k&&0<M.department.length&&(o=O.extend(o,{DEPARTMENT:M.department})),0===w){o=O.extend(o,{TITLE:n,URL:T.location.href,REFERRER:t,WIDTH:E.screen.width,HEIGHT:E.screen.height,TIME:+O.now()});var r=M.plugin;if(0<r.length){var s=M.custom,l=M.name;switch(r){case"Zendesk":"undefined"!=typeof currentUser&&!0===currentUser.isEndUser&&null!==currentUser.id&&(s=currentUser.id,l=currentUser.name);break;case"WHMCS":s!==k&&0!==s.length||(s=LiveHelpSettings.cookies.get("WHMCSUID"))}s!==k&&0<s.length&&(o=O.extend(o,{PLUGIN:r,CUSTOM:s})),l!==k&&0<l.length&&(o=O.extend(o,{NAME:l}))}w=1}P.websockets!==k&&P.websockets.state!==k&&0<P.websockets.state.length&&(o=O.extend(o,{WEBSOCKETS:P.websockets.state})),D.session!==k&&(o=O.extend(o,{SESSION:D.session})),o=O.toJSON(o),o=Base64.encode(o),O.jsonp({url:a,data:{DATA:o},success:function(e){null!==e&&""!==e&&(e.session!==k&&0<e.session.length&&(Le(e.session),O(T).trigger(I+".VisitorLoaded",e)),e.status!==k&&0<e.status.length&&Oe(e.status,e.departments),e.initiate!==k&&e.initiate&&!L.autoload&&De(),e.chat!==k&&0<e.chat&&O(T).trigger(I+".Connecting",e).trigger(I+".Connected",e)),0===w&&(w=1),O.now()-S<54e5?c=E.setTimeout(Be,x):y=!0},error:function(){c=E.setTimeout(Be,x)}})}else c=E.setTimeout(Be,x)}var Ne=a.throttle(Be,x),Pe=a.once(Be);function He(){var e="Offline",n="#"+I+e,t=O("#"+e+"MessageForm").serialize();0<M.security.length&&(t+="&SECURITY="+encodeURIComponent(M.security)),D.session!==k&&0<D.session.length&&(t+="&SESSION="+encodeURIComponent(D.session)),M.template!==k&&0<M.template.length&&(t+="&TEMPLATE="+encodeURIComponent(M.template)),t+="&JSON",O.ajax({url:M.server+f+h.offline,data:t,success:function(e){var t;e.result!==k&&!0===e.result?(O("."+I+(t="Offline")+"Form").fadeOut(250,function(){O("."+I+t+"Sent").fadeIn(250)}),M.embedded&&O("."+I+t+"PoweredBy").css("right","150px"),O(A+t+"Heading").html(L.language.thankyoumessagesent).fadeIn(250),O(T).trigger("LiveHelp.ContactComplete")):(e.type!==k&&("EMAIL"===e.type&&O("#EmailError").removeClass("TickSmall").addClass("CrossSmall").fadeIn(250),"CAPTCHA"===e.type&&O("#SecurityError").removeClass("TickSmall").addClass("CrossSmall").fadeIn(250)),e.error!==k&&0<e.error.length?(O(n+"Description").hide(),O(n+"Error span").html("Error: "+e.error).parent().fadeIn(250)):(O(n+"Error").fadeIn(250),O(n+"Heading").text(L.language.offlineerrortitle),O(n+"Description").hide()))},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}function Re(e,t){return t?(O(e).removeClass("CrossSmall").addClass("TickSmall").fadeIn(250),!0):(O(e).removeClass("TickSmall").addClass("CrossSmall").fadeIn(250),!1)}function $e(e,t){var n=e instanceof O?e.val():O(e).val();return Re(t,!(""===O.trim(n)))}function ze(e,t){var n=e instanceof O?e:O(e),i=n.val(),a=n.attr("data-verify");return Re(t,/^[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+@[\-!#$%&'*+\\\/0-9=?A-Z\^_`a-z{|}~]+\.[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+$/i.test(i)&&(a!==k&&0<a.length&&a===CryptoJS.SHA1(i).toString()||!i.length||a===k))}function We(e,n,i){var t=e instanceof O?e:O(e),a="CrossSmall",o="TickSmall",r=t.val(),s={SECURITY:M.security,CODE:r,JSON:"",EMBED:""},l=M.security.substring(16,56);return 0<t.length?5!==r.length?(5<r.length&&t.val(r.substring(0,5)),O(n).removeClass(o).addClass(a).fadeIn(250),!1):40===l.length?l===CryptoJS.SHA1(r.toUpperCase()).toString()&&(O(n).removeClass(a).addClass(o).fadeIn(250),i&&i(),!0):void O.ajax({url:M.server+f+h.security,data:O.param(s),success:function(e){var t="";e.result!==k&&!0===e.result?(O(n).removeClass(a).addClass(o).fadeIn(250),i&&i()):t="CAPTCHA",0<t.length&&(O(n).removeClass(o).addClass(a).fadeIn(250),i)&&O("#OfflineMessageForm").find(":input[id="+t+"], textarea[id="+t+"]")},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}):(i&&i(),!0)}function Fe(e,t){e.find("select[id=COUNTRY]");var n=e.find(":input[id=TELEPHONE]");$e(e.find(":input[id=NAME]"),"#NameError")&&ze(e.find(":input[id=EMAIL]"),"#EmailError")&&$e(e.find("textarea[id=MESSAGE]"),"#MessageError")&&(0<n.length&&!$e(n,"#TelephoneError")||We(e.find(":input[id=CAPTCHA]"),"#SecurityError",function(){t.call()}))}var Ue=a.once(function(e){LiveHelpSettings.cookies.set(C.name,e,{domain:M.domain})});function Ve(n,e){null!==D.session&&Ue(D.session),e.find(":input[id=CAPTCHA]").val(""),O.ajax({url:M.server+f+h.security,data:{RESET:"",JSON:""},success:function(e){if(e.captcha!==k){M.security=e.captcha;var t="";0<M.security.length&&(t="&"+O.param(O.extend(t,{SECURITY:encodeURIComponent(M.security),RESET:"",EMBED:""}))),O(n+"Security").attr("src",M.server+f+h.security+"?"+O.now()+t)}},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}),O("#SecurityError").fadeOut(250)}function Je(e,t,n){O(t+"Button, "+t+"CloseButton").hover(function(){O(this).toggleClass(e+"Button "+e+"ButtonHover")},function(){O(this).toggleClass(e+"Button "+e+"ButtonHover")}),O(t+"SecurityRefresh").click(function(){Ve(t,n)}),O(t+"Button").click(function(){Fe(O("#OfflineMessageForm"),He)}),O(t+"CloseButton").click(function(){"Online"===L.status?O(this).is(".expand")?ee(!1,!1):te():et()}),O(t+"CloseBlockedButton").click(function(){M.embedded?te():M.popup&&E.close()}),n.find(":input[id=NAME]").bind("keydown blur",function(){$e(this,"#NameError")}),n.find(":input[id=EMAIL]").bind("keydown blur",function(){ze(this,"#EmailError")}),n.find("textarea[id=MESSAGE]").bind("keydown blur",function(){$e(this,"#MessageError")}),n.find("select[id=COUNTRY]").bind("keydown blur",function(){$e(this,"#CountryError")}),n.find(":input[id=TELEPHONE]").bind("keydown blur",function(){var e,t,n;t="#TelephoneError",n=(e=this)instanceof O?e.val():O(e).val(),Re(t,0<O.trim(n).length&&/^[\d| |-|.]{3,}$/.test(n))}),n.find(":input[id=CAPTCHA]").bind("keydown",function(){5<O(this).val().length&&O(this).val(O(this).val().substring(0,5))}).bind("keyup",function(){We(this,"#SecurityError")});var i=n.find("#MESSAGESPEECH"),a=i[0];a!==k&&(a.onfocus=a.blur,a.onwebkitspeechchange=function(e){n.find("#MESSAGE").val(i.val()),i.val("")})}function Ge(){var e="Offline";Je(e,"#"+I+e,O("#"+e+"MessageForm")),!0===M.sprite&&O('<link href="'+M.server+_+"templates/"+M.template+'/styles/sprite.min.css" rel="stylesheet" type="text/css"/>').appendTo("head")}function Ze(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}function qe(){clearInterval(u)}function Xe(e){var t="#Call",n=t+"Status",i="",a="",o=t+"MessageForm ",r=O(o+"select[id=COUNTRY]").val(),s=r.substring(r.indexOf("+"))+" "+O(o+":input[id=TELEPHONE]").val(),l=L.language.cancel;switch(e){case 0:i=L.language.pleasewait,a=L.language.telephonecallshortly+"<br/>"+L.language.telephonethankyoupatience;break;case 1:i="Initalising",a=L.language.telephonecallshortly+"<br/>"+L.language.telephonethankyoupatience;break;case 2:i="Initalised",a=L.language.telephonecallshortly+"<br/>"+L.language.telephonethankyoupatience;break;case 3:i="Incoming Call",a="We are now calling you on "+s+".<br/>Please answer your telephone to chat with us.";break;case 4:i="Connected",a="Call connected to "+s+".<br/>"+L.language.telephonethankyoupatience;break;case 5:i="Thank you",a="Your call has completed.<br/>Thank you for contacting us.",l="Close";break;case 6:i="Line Busy",a="Service is temporarily busy.<br/>Please try again later.";break;default:i="Unavailable",a="Service is temporarily unavailable.<br/>Please try again later."}O(n+"Heading").text(i),O(n+"Description").html(a),O(t+"CancelButton div").text(l),e!==d&&(4===e?function(){qe();var i=0,a=O("#CallStatusHeading");u=setInterval(function(){var e=59<++i?parseInt(i/60):0,t=59<i?i%60:i,n=Ze(e,2)+":"+Ze(t,2);a.text("Connected - "+n+"s")},1e3)}():qe(),d=e)}function Ke(){var e="#CallMessageForm ",t=O(e+":input[id=NAME]").val(),n=O(e+":input[id=EMAIL]").val(),i=O(e+"select[id=COUNTRY]").val(),a=ke(),o=i.substring(i.indexOf("+")),r={NAME:t,EMAIL:n,COUNTRY:i,TIMEZONE:a,DIAL:o,TELEPHONE:O(e+":input[id=TELEPHONE]").val(),MESSAGE:O(e+":input[id=MESSAGE]").val(),CAPTCHA:O(e+":input[id=CAPTCHA]").val(),SECURITY:M.security};O.fancybox.showLoading(),O.ajax({url:M.server+f+h.call,data:O.param(r),dataType:"jsonp",success:function(e,t,n){e!==k&&e.session!==k&&0<e.session.length&&(O.fancybox({href:"#CallDialog",type:"inline",closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1},title:null}}),N=e.session)},error:function(){updateStatus(-1)},cache:!1,xhrFields:{withCredentials:!0}})}function Qe(){var t="Call",e="#"+I+t,n=O("#CallMessageForm");Je(t,e,n),O(e+"Button").click(function(){Fe(O("#CallMessageForm"),Ke)}),O("#CallCancelButton").hover(function(){var e=O(this).attr("id").replace("#"+t,"");O(this).toggleClass("#"+e+" #"+e+"Hover")},function(){var e=O(this).attr("id").replace("#"+t,"");O(this).toggleClass("#"+e+" #"+e+"Hover")}).click(function(){if(5===d)E.close();else{var e={SESSION:N,STATUS:5};O.ajax({url:M.server+f+h.call+"?JSON",data:O.param(e),success:function(e,t,n){E.close()},cache:!1,xhrFields:{withCredentials:!0}})}})}function Ye(e){if(D.session!==k&&0<D.session.length)e=O.extend(e,{SESSION:D.session});else if(!z)return;e=O.extend(e,{LANGUAGE:L.locale}),O.fancybox.showLoading(),e=O.extend(e,{SERVER:M.server+_,JSON:"",RESET:"",EMBED:"",TEMPLATE:M.template}),O.jsonp({url:M.server+f+h.offline+"?callback=?&"+O.param(e),data:O.param(e),success:function(e){e.captcha!==k&&(M.security=e.captcha),e.html!==k&&O.fancybox.open({content:e.html,type:"html",fitToView:!0,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1},title:null},padding:0,minWidth:300,width:840,height:551,beforeShow:X,afterShow:Ge})}})}function et(e,t,n,i){var a="",o=!1,r=L.status;if(D.session!==k&&0<D.session.length){if(i=O.extend(i,{SESSION:D.session}),e!==k&&0<L.templates.length){var s=e.attr("class");s!==k&&((a=s.split(" ")[1])===k||O.inArray(a,L.templates)<0)&&(a=""),t=function(e,t){t=t.replace(/(\[|\])/g,"\\$1");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}(e.children("img."+I+"Status").attr("src"),"DEPARTMENT")}if(M.template!==k&&0<M.template.length&&(a=M.template),i=O.extend(i,{LANGUAGE:L.locale,TIME:O.now()}),e!==k&&e.attr("class")!==k&&-1!==e.attr("class").indexOf("LiveHelpCallButton")&&(o=!0),M.embedded&&!o){if(0<M.department.length&&(t=M.department),"Online"===r||M.connected)O(A+"Embedded").is(".closed")&&ee(!1,!1);else 0===L.offlineEmail?""!==L.offlineRedirect&&(T.location=L.offlineRedirect):Ye(i);return!1}if(t!==k&&""!==t&&(-1===O.inArray(t,L.departments)&&(r="Offline"),i=O.extend(i,{DEPARTMENT:t})),a!==k&&""!==a&&(i=O.extend(i,{TEMPLATE:a})),n!==k&&""!==n||(n=h.home),"Online"!==r)return 0===L.offlineEmail?""!==L.offlineRedirect&&(T.location=L.offlineRedirect):l=E.open(M.server+f+h.offline+"?"+O.param(i),I,v),!1;if(""!==M.name&&(i=O.extend(i,{NAME:M.name})),""!==M.email&&(i=O.extend(i,{EMAIL:M.email})),l=E.open(M.server+f+n+"?"+O.param(i),I,v))try{l.opener=E}catch(e){}}else O(A+"Embedded.signup-collapsed").length&&(z=!0,Ye(i=O.extend(i,{LANGUAGE:"en",TIME:O.now()})))}function tt(){O(A+"SignInDetails, "+A+"Login #Inputs").hide();var e=O(A+"Connecting"),t=e.find(".connecting-container");0<t.length&&0===t.find("img").length&&t.prepend('<img src="'+M.server+_+'images/ProgressRing.gif" style="opacity: 0.5"/>'),0!==L.loginDetails&&e.show()}function nt(e){var t=A+"LoginForm",n=O(A+"NameInput, "+t+" :input[id=NAME]"),i=O(A+"DepartmentInput, "+t+" select[id=DEPARTMENT], "+t+" input[id=DEPARTMENT]"),a=O(A+"EmailInput, "+t+" :input[id=EMAIL]"),o=O(A+"QuestionInput, "+t+" textarea[id=QUESTION]"),r=O(A+"OtherInput, "+t+" :input[id=OTHER]"),s=O(A+"Login #Inputs"),l=O(A+"Connecting"),c=e!==k&&!1===e;if(tt(),0<M.department.length&&i.val(M.department),0<i.length&&null!==i.val()&&(B.department=i.val(),Q()),L.requireGuestDetails&&!c){var u={name:!0,email:!0,department:!0};if(u.name=$e(n,A+"NameError"),L.loginEmail&&(u.email=ze(a,A+"EmailError")),0<L.departments.length){var d=i.data("collapsed");u.department=$e(i,A+"DepartmentError"),d||(i.data("collapsed",!0),i.animate({width:i.width()-35},250))}if(!u.name||!u.email||!u.department)return l.hide(),void s.show()}0<n.val().length&&(L.user=n.val()),n=0<n.length?n.val():"",i=0<i.length&&null!==i.val()?i.val():"",a=0<a.length?a.val():"",r=0<r.length?r.val():"";var p={NAME:n,EMAIL:a,DEPARTMENT:i,QUESTION:o=0<o.length?o.val():"",OTHER:r,SERVER:T.location.host,JSON:""};null!==D.session&&(p=O.extend(p,{SESSION:D.session})),O.ajax({url:M.server+f+h.chat,data:O.param(p),success:function(e){if(e.error===k){if(e.session!==k&&0<e.session.length&&(O(T).trigger(I+".Connecting",e),0!==L.loginDetails&&O(A+"Messages .InitiateChat").hide(),O(A+"MessageTextarea").removeAttr("disabled"),B.chatEnded=!1,Q(),L.email=e.email,0<L.user.length&&(L.user=e.user),null!==D.session&&(D.session=e.session,LiveHelpSettings.cookies.set(C.name,D.session,{domain:M.domain})),0<st.length&&0===L.loginDetails?(rt(st[0],function(){mt(),ye()}),st=[]):(mt(),ye()),M.popup&&(O(A+"Login").hide(),O(A+"Chat").fadeIn(250),pt()),M.connected=!0),e.status!==k&&"Offline"===e.status){te();var t=O(A+"Embedded");!0===M.hideOffline?t.fadeOut(250).css("z-index","10000000"):(t.fadeIn(250).css("z-index","5000"),t.find("."+I+"Icon").addClass("offline").fadeIn(),Ce("Offline",t)),t.find(".CloseButton").fadeOut(250)}gt()}else M.connected=!1},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}function it(e){(e=!0===e?1:0)!==i&&(i=e,O(T).trigger(I+".UpdateTyping",{typing:i}))}function at(e){var t;return t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},e=(e=e.replace(/[&<>"']/g,function(e){return t[e]})).replace(/\r\n|\r|\n/g,"<br />")}!function a(){if(0<N.length){var e={SESSION:N},o=2e3;O.ajax({url:M.server+f+h.call+"?JSON",data:O.param(e),success:function(e,t,n){var i=-1;e.status!==k&&(i=parseInt(e.status,10)),Xe(i),3<i&&(o=15e3),E.setTimeout(a,o)},error:function(){Xe(-1),E.setTimeout(a,2e3)},cache:!1,xhrFields:{withCredentials:!0}})}else E.setTimeout(a,2e3)}();var ot=function(c,u){return function(e,t,n){if(null!==e&&""!==e&&e.id!==k&&0===O(".message[data-id="+e.id+"]").length){var i="message",a=15,o="#666";M.messageBubbles&&(i+=" bubble right",a=0,o="#000"),e.datetime||(e.datetime=Date.now()/1e3|0);var r='<div class="'+i+'" data-id="'+e.id+'" data-datetime="'+e.datetime+'" align="left" style="color:#666">',s=0<L.user.length?L.user:"Guest";M.messageBubbles||(r+=at(s)+" "+L.language.says+":<br/>");var l=at(c);l=(l=l.replace(/([a-z0-9][a-z0-9_\.\-]{0,}[a-z0-9]@[a-z0-9][a-z0-9_\.\-]{0,}[a-z0-9][\.][a-z0-9]{2,4})/g,'<a href="mailto:$1" class="message-email">$1</a>')).replace(/((?:(?:http(?:s?))|(?:ftp)):\/\/[^\s|<|>|'|\"]*)/g,'<a href="$1" target="_blank" class="message-link">$1</a>'),L.smilies&&(l=de(l)),r+='<div style="margin: 0 0 0 '+a+"px; color: "+o+'">'+l+"</div></div>",O(A+"Messages").append(r),oe(),ce(),u&&u()}}};function rt(e,t){var n={MESSAGE:e},i=M.server+f+h.send,a=O(A+"MessageTextarea");D.session!==k&&0<D.session.length&&(n=O.extend(n,{SESSION:D.session}),0===e?O.ajax({url:i,data:O.param(n),dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}):(n.JSON="",O.ajax({url:i,data:O.param(n),success:ot(e,t),dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}),it(!1)),a.val(""),O.jStorage.set(I+".MessageTextarea",""))}var st=[];function lt(){M.connected=!1,B.chatEnded=!0,B.department="",B.lastMessage=0,Q(),r=0,O(A+"SignedIn, "+A+"Login #Inputs, "+A+"CollapseButton, "+A+"Toolbar, "+A+"SignInDetails, "+A+"Connecting").fadeOut(),O(A+"SignIn, "+A+"BlockedChatDetails").fadeIn(),O(A+"MessageTextarea").attr("disabled","disabled"),O(A+"ClosedChatMessage").show();var e=O(A+"Login #BlockedChat");e.fadeIn(),0===e.find("img").length&&e.prepend('<img src="'+M.server+_+'images/Block.png"/>')}function ct(){var e=800;O(T).bind(I+".Connected",function(e,t,n,i,a){ae(t,n,i,a),M.accepted=!0}).bind(I+".Disconnect",function(){M.connected=!1,B.chatEnded=!0,B.department="",B.lastMessage=0,Q(),O(A+"Input").find("textarea, "+A+"SmiliesButton, "+A+"Typing").hide(),O(A+"Input *").filter(":not("+A+"PoweredByParent, "+A+"PoweredByParent a, "+A+"PoweredBy)").hide(),O(A+"Input").height("35px"),O(A+"Embedded "+A+"Scroll").height("370px"),O(A+"ClosedChatMessage").show(),O(A+"MessageTextarea").attr("disabled","disabled"),(O(A+"SignedIn").is(":visible")||M.popup)&&we(),O.ajax({url:M.server+f+h.signout,data:{SESSION:encodeURIComponent(D.session)},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}).bind(I+".BlockChat",function(){lt()}),O(T).on("click",A+"ClosedChatMessage a",function(){var e=O(A+"Input");0===L.loginDetails?(O(A+"Body, "+A+"Background").css("background-color","#fff"),O(A+"Scroll").height("330px"),e.find("textarea").removeAttr("disabled").show(),e.animate({bottom:0,height:"100px"},500)):(O(A+"Connecting").hide(),O(A+"Body, "+A+"Background").css("background-color","#f9f6f6"),O(A+"SignIn, "+A+"Login #Inputs").show(),O(A+"Scroll").height("310px"),O(A+"SignedIn").hide(),e.find("textarea, "+A+"SmiliesButton, "+A+"Typing").show(),e.css({bottom:"-100px",height:"100px"})),O(A+"FeedbackRating, "+A+"ClosedChatMessage").hide()}),O(A+"Toolbar div").hover(function(){O(this).fadeTo(200,1)},function(){O(this).fadeTo(200,.5)}),O(A+"SoundToolbarButton").click(function(){B.soundEnabled?B.soundEnabled=!1:B.soundEnabled=!0,Q(),re()}),M.popup&&(e=675),O(A+"DisconnectToolbarButton").fancybox({href:A+"Disconnect",maxWidth:e,helpers:{overlay:{css:{cursor:"auto"}},title:null},openEffect:"elastic",openEasing:"swing",closeEffect:"elastic",closeEasing:"swing",beforeShow:function(){O(A+"Embedded").css("z-index",900),O(".bubbletip").css("z-index",950)},afterClose:function(){O(A+"Embedded").css("z-index",1e7),O(".bubbletip").css("z-index",9e7)}}),O(A+"FeedbackToolbarButton").click(function(){we()}),O(A+"ConnectButton").click(function(){nt()}),O(A+"DisconnectButton, "+A+"CancelButton, "+A+"ConnectButton").hover(function(){var e=O(this).attr("id").replace(I,"");O(this).toggleClass(e+" "+e+"Hover")},function(){var e=O(this).attr("id").replace(I,"");O(this).toggleClass(e+" "+e+"Hover")}),O(A+"CancelButton").click(function(){O.fancybox.close()}),O(A+"DisconnectButton").click(function(){var e;e="jsonp",M.connected=!1,B.chatEnded=!0,B.department="",B.lastMessage=0,Q(),r=0,O(T).trigger(I+".DisconnectChat"),te(function(){ne(),M.chatBubbles&&(O("."+I+"Operator .OperatorImage").hide(),Ce(L.status,embed),O("."+I+"Icon").fadeIn()),O(A+"Messages").html(""),O(A+"SignedIn, "+A+"Toolbar, "+A+"CollapseButton").hide(),O(A+"Body, "+A+"Background").css("background-color","#f9f6f6"),O(A+"Input").animate({bottom:-100},500),O(A+"SignIn, "+A+"Waiting").show(),O(A+"Login #Inputs").show(),O(A+"Connecting").hide()}),M.popup&&(e="json"),O.ajax({url:M.server+f+h.signout,data:{SESSION:encodeURIComponent(D.session)},dataType:e,cache:!1,xhrFields:{withCredentials:!0},success:function(e){M.popup&&E.close()},error:function(e,t,n){console.log(t)}}),O.fancybox.close()}),O(A+"SmiliesButton").click(function(e){O(this).bubbletip(O("#SmiliesTooltip"),{calculateOnShow:!0}).open(),e.stopPropagation&&e.stopPropagation()});var i=A+"MessageTextarea";O(i).keypress(function(e){var t,n;return""===O(i).val()?it(!1):it(!0),13!==e.keyCode&&13!==e.charCode||(t=O(A+"MessageTextarea"),n=t.val(),M.connected?""!==n&&rt(n):(nt(!1),0===st.length&&""!==n&&(st.push(n),t.val(""),O.jStorage.set(I+".MessageTextarea",""))),!1)}).blur(function(){it(!1)}).focus(function(){O(A+"SmiliesButton").close(),Y(),fe()}),O(A+"Embedded").click(function(){O(A+"SmiliesButton").close()}),O(i).keyup(function(e){var t=O(i).val();O.jStorage.set(I+".MessageTextarea",t)}),O(i).val(O.jStorage.get(I+".MessageTextarea","")),O("#SmiliesTooltip span").click(function(){var e=O(this).attr("class").replace("sprite ",""),t=O(i).val(),n="";switch(e){case"Laugh":n=":D";break;case"Smile":n=":)";break;case"Sad":n=":(";break;case"Money":n="$)";break;case"Impish":n=":P";break;case"Sweat":n=":\\";break;case"Cool":n="8)";break;case"Frown":n=">:L";break;case"Wink":n=";)";break;case"Surprise":n=":O";break;case"Woo":n="8-)";break;case"Tired":n="X-(";break;case"Shock":n="8-O";break;case"Hysterical":n="xD";break;case"Kissed":n=":-*";break;case"Dizzy":n=":S";break;case"Celebrate":n="+O)";break;case"Angry":n=">:O";break;case"Adore":n="<3";break;case"Sleep":n="zzZ";break;case"Stop":n=":X"}O(A+"MessageTextarea").val(t+n)});var t=O(A+"MessageSpeech"),n=t[0];n!==k&&(n.onfocus=n.blur,n.onwebkitspeechchange=function(e){O(A+"MessageTextarea").val(t.val()),t.val("")})}function ut(){O(A+"DepartmentInput, "+A+"LoginForm select[id=DEPARTMENT]").each(function(){var e="collapsed";O(this).data(e)===k&&O(this).data(e,!1)})}function dt(){var e=A+"LoginForm";L.requireGuestDetails&&(O(A+"NameInput, "+e+" input[id=NAME]").bind("keydown blur",function(){$e(this,A+"NameError")}),L.loginEmail&&O(A+"EmailInput, "+e+" input[id=EMAIL]").bind("keydown blur",function(){ze(this,A+"EmailError")}),0<L.departments.length&&O(A+"DepartmentInput, "+e+" select[id=DEPARTMENT]").bind("keydown keyup blur change",function(){var e=O(this),t=e.data("collapsed");$e(e,A+"DepartmentError"),t||(e.animate({width:e.width()-35},250),e.data("collapsed",!0))})),L.loginEmail||(O(A+"EmailInput, "+e+" input[id=EMAIL]").hide(),O("."+I+"Login .EmailLabel").hide()),L.loginQuestion||(O(A+"QuestionInput, "+e+" input[id=QUESTION]").hide(),O("."+I+"Login .QuestionLabel").hide())}function pt(){var e=O(E).height(),t=O(E).width(),n=0<O(A+"Campaign").length&&!O(A+"Campaign").is(":hidden")?O(A+"Campaign").width():0,i=O(A+"ScrollBorder"),a=O(A+"ScrollBorder"),o=O(A+"Messages"),r=O(A+"MessageTextarea");if(0<i.length&&0<a.length){-1===i.css("width").indexOf("%")&&(O(A+"Scroll, "+A+"ScrollBorder").css("width","auto"),a.css("width",t-n-40+"px"),o.css("width",t-n-48+"px"),i.css("width",t-n-20+"px")),O(A+"Scroll, "+A+"ScrollBorder").css("height","auto").css("height",e-175-10+"px"),O(".body").css({width:t+"px","min-width":"625px"}),-1===r.css("width").indexOf("%")&&r.css("width",t-165+"px"),t=i.css("width");var s=parseInt(t,10),l=t.slice(-2);O(A+"Messages img, ."+I+"Image, ."+I+"VideoZoom, ."+I+"VideoHover, ."+I+"ImageZoom, ."+I+"ImageHover").not(".noresize").each(function(){var e=parseInt(O(this).css("max-width"),10),t=parseInt(O(this).css("max-height"),10),n=s-50,i=n*(t/e);n<=e&&O(this).css("width",n+l),(i<=t||O(this).is("."+I+"Image"))&&O(this).css("height",i+l)}),ce()}}function ft(e){if(e=void 0!==e&&e,xe(),M.popup&&(ct(),function(){O(E).resize(function(){pt()}),O(T).ready(function(){ut(),M.connected&&(O(t+"Login").hide(),O(t+"Chat").fadeIn(250),pt(),nt())}),dt(),Ge(),Qe(),p===k&&(p=new buzz.sound(M.server+_+"sounds/Pending Chat",{formats:["ogg","mp3","wav"],volume:100}));var e=-1<T.location.pathname.indexOf(_+h.call)?"Call":"Offline",t="#"+I+e,n=O("#"+e+"MessageForm");Ve(t,n)}()),O(T).trigger(I+".StatusModeChanged",L.status),0===O(A+"Embedded").length&&!0===M.embedded){L.language.copyright.length,L.rtl,L.rtl;if(0<"".length){O('<style type="text/css"></style>').appendTo(T.head)}0<L.embedded.length&&O(L.embedded).appendTo(T.body),L.status!==k&&0<L.status.length&&Oe(L.status,L.departments),O(A+"Embedded input, "+A+"Embedded textarea").placeholder();var t={default:{tab:"#dddedf",theme:"dark"},green:{tab:"#26c281",theme:"light"},turquoise:{tab:"#31cbbb",theme:"light"},blue:{tab:"#3498db",theme:"light"},purple:{tab:"#8e44ad",theme:"light"},pink:{tab:"#db0a5b",theme:"light"},orange:{tab:"#f5ab35",theme:"light"}};if("light"!==M.theme&&"dark"!==M.theme&&t[M.theme]!==k){var n=t[M.theme];O(A+"Tab").css("background-color",n.tab),M.theme=n.theme}M.theme!==k&&"light"===M.theme&&O(A+"CloseButton, "+A+"StatusText").addClass("light"),M.colors!==k&&M.colors.tab!==k&&M.colors.tab.normal!==k&&(O(A+"Tab").css("background-color",M.colors.tab.normal),M.colors.tab.hover!==k&&O(A+"Tab").hover(function(){O(this).css("background-color",M.colors.tab.hover)},function(){O(this).css("background-color",M.colors.tab.normal)})),O.each(L.language,function(e,t){var n=O(A+'Embedded [data-lang-key="'+e+'"]');0<n.length&&n.text(t)}),0<(d=O(A+"Embedded")).length&&(O(A+"Tab, "+A+"StatusText, ."+I+"Icon, .OperatorImage, ."+I+"Operator, ."+I+"MobileButton").click(function(){M.embedded=!0,"Online"===L.status||M.connected?(d.is(".closed")?(B.notificationEnabled||(B.notificationEnabled=!0),ee(!1,!1)):te(),Q()):et()}),O(A+"StatusText, ."+I+"StatusIndicator, ."+I+"Operator, .OperatorImage, ."+I+"CloseButton").hover(function(){O(this).parent().find(A+"Tab").addClass("hover"),O("."+I+"StatusIndicator").addClass("hover")},function(){O(this).parent().find(A+"Tab").removeClass("hover"),O("."+I+"StatusIndicator").removeClass("hover")}),O(A+"CloseButton").click(function(){"Online"===L.status?O(this).is(".expand")?ee(!1,!1):te():et()}),O(A+"CloseBlockedButton").click(function(){te()}),O(A+"CollapseButton").click(function(){86===parseInt(O(A+"Body").css("top"),10)?(B.operatorDetailsOpen=!1,ne()):(B.operatorDetailsOpen=!0,ae()),Q()}),O(A+"ContinueEmailInput").on({keypress:function(e){var t=O(this).val();if(13===e.keyCode||13===e.charCode){var n=ze(this,A+"ContinueEmailError");if(0<t.length&&n){var i={SESSION:D.session,EMAIL:t};L.email=i.email,O.ajax({url:M.server+f+h.email,data:O.param(i),success:function(e,t,n){O(A+"Continue ."+I+"Input, ."+I.toLowerCase()+"-continue-text").hide(),O(A+"Continue .status").text("Thanks!  We will contact you at "+e.email).show(),ce(),O(T).trigger("LiveHelp.EmailComplete")},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}return!1}return!0}})),dt(),ct();M.server,h.image;M.account!==k&&M.server+f+h.image+"/round/default/50px/";var i=L.embeddedinitiate;if(i!==k&&0<i.id&&i.photo&&(M.chatBubbles=!0),M.chatBubbles){0<i.id&&ae(i.id,i.name,i.department,i.avatar);var a=O(A+"Embedded ."+I+"Operator");O(A+"StatusText").css("left","70px"),a.find(".OperatorImage").show(),a.show()}if(O(A+"SwitchPopupToolbarButton").click(function(){M.embedded=!1,te(function(){B.notificationEnabled=!1,Q()}),et(O(this))}),le(),K(L.departments),D.session!==k&&0<D.session.length)if("Online"===L.status)if(0!==L.autoload)B.openTab&&ee(!1,!1);else{var o=O(A+"Embedded"),r=O(A+"InitiateChatBubble").is(":visible");o.is(":hidden")&&(O(A+"Waiting").hide(),r||(o.fadeIn(50,function(){M.connected||L.initiate||O("."+I+"Icon").fadeIn()}),O("."+I+"MobileButton").addClass("show")),le())}else 0!==L.autoload&&ee(!1,!1);var s=A+"LoginForm",l=O(A+"NameInput, "+s+" :input[id=NAME]"),c=O(A+"EmailInput, "+s+" :input[id=EMAIL]"),u=O(A+"SignIn").find("input, textarea");M.name!==k&&0<M.name.length&&(l.val(M.name),L.requireGuestDetails&&$e(l,A+"NameError")),M.email!==k&&0<M.email.length&&(c.val(M.email),L.requireGuestDetails&&ze(c,A+"EmailError")),L.requireGuestDetails||u.css("width","100%"),0!==L.autoload&&(ye(),e||(M.connected=!0)),M.connected||L.initiate||O("."+I+"Icon").fadeIn(),W()}var d}function ht(e){var t=O(A+"Continue"),n=O(A+"Messages");!1===L.email?!1!==e&&t.find("."+I.toLowerCase()+"-continue-text").text(e):(t.find("."+I.toLowerCase()+"-continue-text").text("Hmm looks like there was no response.  We will reply via email shortly."),t.find("."+I+"Input").hide(),L.email!==k&&t.find(".status").text("We will contact you at "+L.email).show()),n.find(A+"Continue").length||(O(t).appendTo(n).show().attr("data-datetime",Date.now()/1e3|0),ce())}E.isActive=!0,O(E).focus(function(){this.isActive=!0,fe()}),O(E).blur(function(){this.isActive=!1}),X(),O(T).bind(I+".SettingsUpdated",function(){ft()}),O(T).bind(I+".StatusModeUpdated",function(e,t){var n=t.data;L.departments=n.departments,Oe(n.status,L.departments)}),O(T).bind(I+".WebSocketStateChanged",function(e,t){H=t.connected,P.websockets!==k&&!0===P.websockets.enabled?("established"!==P.websockets.state&&"established"===t.state||"error"!==P.websockets.state&&"error"===t.state)&&(P.websockets.state=t.state,Pe()):Ne()}),O(T).bind(I+".UpdateMessages",function(e,t){t!==k&&(t.status===k?t.status=0:0<t.status&&gt()),M.accepted=!0,ve()});var gt=a.debounce(function(){ht(!1)},9e4),mt=a.debounce(function(){M.accepted||ht(!1)},M.promptPrechatDelay);O(T).bind(I+".MessageReceived",function(e,t){t.align===k&&(t.align=1),t.status===k&&(t.status=0),0<t.status&&gt(),me([t])}),O(T).ready(function(){g=O(T).attr("title");var e="";!0===M.fonts&&(e='<link href="'+M.protocol+'fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet" type="text/css"/>'),!0===M.css&&(e+='<link rel="preload" onload="this.rel=\'stylesheet\'" as="style" href="'+M.server+_+"templates/"+M.template+'/styles/styles.css" type="text/css"/>'),0<e.length&&O(e).appendTo("head"),O(this).click(function(){fe()}),L!==k&&L.status!==k&&ft(),W(),M.popup&&pt(),"undefined"!=typeof resetPosition&&O(E).bind("resize",resetPosition),O(E).bind("storage",function(e){le()})})}(this,document,"LiveHelp",LiveHelpSettings,LiveHelpSettings._,jQuery);
